{"version":3,"sources":["components/footer.js","utils/hooks.js","components/tooltips.js","components/level.js","components/minigraph.js","../node_modules/details-element-polyfill/dist/details-element-polyfill.js","components/maplegend.js","components/choropleth.js","components/mapexplorer.js","components/timeseries.js","components/timeseriesexplorer.js","../node_modules/react-feather/dist/icons/compass.js","../node_modules/@primer/components/lib/Breadcrumb.js","../node_modules/@primer/components/lib/Dropdown.js","../node_modules/@primer/components/lib/Details.js","../node_modules/@primer/components/lib/DropdownStyles.js","components/deltabargraph.js","components/statemetacard.js","components/statemeta.js","../node_modules/react-feather/dist/icons/smile.js","components/state.js"],"names":["React","memo","props","t","useTranslation","className","style","animationDelay","href","target","rel","justifyContent","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","observer","forEach","entry","index","contentRect","observe","unobserve","testedToolTip","onClick","e","stopPropagation","data-for","data-tip","data-event","data-event-off","id","place","type","effect","multiline","scrollHide","globalEventOff","data","setData","useEffectOnce","active","confirmed","recovered","deaths","deltaconfirmed","deltadeaths","deltarecovered","isNaN","formatNumber","timeseries","timeSeriesData","setTimeSeriesData","svgRef1","useRef","svgRef2","svgRef3","svgRef4","slice","length","graphData","useCallback","margin","chartRight","chartBottom","svg1","d3","svg2","svg3","svg4","d","dailyconfirmed","dailyrecovered","dailydeceased","xScale","domain","date","range","svgArray","dataTypes","colors","dailyMin","dailyactive","dailyMax","Math","max","domainMinMax","yScale","svg","i","color","path","append","datum","attr","x","y","curve","totalLength","node","getTotalLength","transition","delay","duration","selectAll","enter","on","width","height","viewBox","preserveAspectRatio","element","document","createElement","elementIsNative","HTMLDetailsElement","support","_ref","setAccessibilityAttributes","root","tagName","concat","getElementsByTagName","call","findElementsWithTagName","summary","details","findClosestElementWithTagName","setAttribute","hasAttribute","eventIsSignificant","event","defaultPrevented","ctrlKey","metaKey","shiftKey","isContentEditable","onTogglingTrigger","callback","addEventListener","which","parentNode","keyCode","preventDefault","triggerToggle","createEvent","initEvent","dispatchEvent","closest","head","insertAdjacentHTML","prototype","constructor","removeAttribute","open","Object","getOwnPropertyDescriptor","defineProperties","get","this","set","value","name","_value","_this","wasOpen","result","querySelector","_this2","polyfillProperties","window","MutationObserver","mutations","mutation","addedNodes","documentElement","subtree","childList","attributeName","attributes","getAttribute","setTimeout","isOpen","MapLegend","mapScale","statistic","mapStatistic","mapOption","svgRef","wrapperRef","getBoundingClientRect","MAP_STATISTICS","ZONE","legend","tickValues","marginLeft","marginRight","ordinalWeights","values","HOTSPOTS","select","remove","domainMax","join","copy","tickSize","tickPadding","tickFormat","g","title","capitalizeAll","PER_MILLION","ticks","n","TOTAL","Number","isInteger","position","marginTop","marginBottom","tickAdjust","interpolate","min","rangeRound","ramp","toDataURL","interpolator","assign","undefined","round","map","invertExtent","thresholds","quantiles","thresholdFormat","widthScale","reduce","a","b","xPos","w","acc","bandwidth","text","canvas","context","getContext","fillStyle","fillRect","caseColor","caseType","alpha","ChoroplethMap","mapData","currentMap","changeMap","regionHighlighted","setRegionHighlighted","isCountryLoaded","mapMeta","MAP_META","geoDataResponse","useSWR","geoDataFile","file","useMemo","stat","clamp","nice","colorInterpolator","geoData","topology","topojson","objects","graphObjectStates","graphObjectDistricts","widthDefault","heightDefault","projection","fitWidth","fitSize","bBox","bounds","split","features","view","MAP_VIEWS","STATES","f","district","properties","state","st_nm","obj","onceTouchedRegion","regionSelection","sel","region","mapType","MAP_TYPES","STATE","parseFloat","total","toFixed","toString","circlesData","Unknown","sort","centroid","meshStates","COUNTRY","meshDistricts","DISTRICTS","highlightRegionInMap","each","highlighted","appendChild","Fragment","colorInterpolationFilters","getRegionFromState","mapName","states","districts","zones","stateTestData","anchor","setAnchor","setMapOption","setCurrentMap","currentMapMeta","currentMapData","dtype","keys","acc1","acc2","zone","typeCount","parseInt","STATE_POPULATIONS","districtWiseData","districtData","Total","stateData","find","getRegionFromDistrict","hoveredRegion","panelRegion","hoveredRegionCount","hoveredRegionZone","switchMapToState","newMapMeta","topDistrict","filter","ReactDOM","unstable_batchedUpdates","testObj","display","innerWidth","action","totaltested","parse","updatedon","Date","formatDayMonth","source","lastupdatedtime","formatDate","formatLastUpdated","to","STATE_CODES_REVERSE","prevProps","currProps","equal","timeseriesProp","chartType","mode","logMode","stateCode","Infinity","lastDaysCount","setLastDaysCount","setTimeseries","datapoint","setDatapoint","setIndex","moving","setMoving","svgRef5","transformTimeSeries","slicedTimeseries","sliceTimeseriesFromEnd","T","yScales","svg5","dateMin","subDays","dateMax","addDays","numTicksX","xAxis","tick","formatTimeseriesTickX","xAxis2","yAxis","plotTotal","dataTypesTotal","dataTypesDaily","uniformScaleMin","totalactive","totalrecovered","totaldeceased","uniformScaleMax","totalconfirmed","yScaleUniformLinear","yScaleUniformLog","yScaleLinear","yScaleLog","yScaleDailyUniform","focus","mousemove","xm","invert","bisectDate","left","j","mouseout","typeTotal","typeDaily","filteredTimeseries","reverse","p","getPointAtLength","repeat","dateStr","formatTimeseriesDate","chartKey1","chartKey2","chartKey3","chartKey4","chartKey5","currentStatusCount","currentDiff","formatedDiff","aria-label","isIntersecting","activeStateCode","onHighlightState","useLocalStorage","setChartType","isTimeseriesIntersecting","setIsTimeseriesIntersecting","timeseriesMode","setTimeseriesMode","timeseriesLogMode","setTimeseriesLogMode","options","rootMargin","onChange","htmlFor","checked","disabled","selectedState","selectedOptions","JSON","s","statecode","key","statedata","stringify","_extends","arguments","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Compass","forwardRef","_ref$color","_ref$size","size","rest","xmlns","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","points","propTypes","PropTypes","string","oneOfType","number","displayName","_interopRequireDefault","require","defineProperty","exports","_objectSpread2","_extends2","_objectWithoutProperties2","_react","_propTypes","_classnames","_styledComponents","_sx","_constants","_theme","_Box","Wrapper","li","withConfig","componentId","BreadcrumbBase","children","theme","classes","wrappedChildren","Children","child","as","my","pl","Breadcrumb","COMMON","FLEX","Item","attrs","activeClassName","selected","defaultProps","elementType","bool","_default","_Button","_Details","_DropdownStyles","StyledDetails","Dropdown","overlay","Button","_ref2","Caret","div","Menu","ul","direction","oneOf","_interopRequireWildcard","_slicedToArray2","Details","_ref$render","render","getRenderer","userOpen","onClickOutside","onToggle","_ref$defaultOpen","defaultOpen","_useState","_useState2","internalOpen","setInternalOpen","onClickOutsideInternal","removeEventListener","func","object","ne","sw","se","ctype","formatTime","paddingInner","h","sign","abs","roundedBar","textSelection","StateMetaCard","formula","description","StateMeta","testObject","population","lastSevenDaysData","totalData","sevenDayBeforeData","sevenDayBeforeDate","format","previousDayData","previousDayDate","confirmedPerMillion","recoveryPercent","activePercent","deathPercent","testPerMillion","growthRate","totalConfirmedPerMillion","updatedDate","Smile","x1","y1","x2","y2","Breadcrumbs","stateName","fetched","STATE_CODES","useParams","toUpperCase","allStateData","setAllStateData","setFetched","districtZones","setDistrictZones","setStateData","testData","setTestData","sources","setSources","setDistrictData","useMeasure","mapSwitcher","showAllDistricts","setShowAllDistricts","getState","Promise","all","axios","dataResponse","stateDistrictWiseResponse","statesDailyResponse","stateTestResponse","sourcesResponse","zonesResponse","statewise","ts","parseStateTimeseries","testTs","parseStateTestTimeseries","states_tested_data","tsMerged","mergeTimeseries","sourceList","sources_list","parseStateTestData","parseDistrictZones","anime","targets","translateX","easing","opacity","console","log","gridRowCount","gridColumnCount","districtCount","ceil","getGridRowCount","Helmet","content","formatDateAbsolute","transform","match","num","gridTemplateRows","districtB","districtA","cases","delta","every","day"],"mappings":"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","file":"static/js/State.94b836b1.chunk.js","sourcesContent":["import React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nfunction Footer(props) {\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <footer className=\"fadeInUp\" style={{animationDelay: '2s'}}>\r\n      <h5>{t('Project made by Nihal Maharaj , Nikhil Rathore , Prashant Namdeo , Abhishek Srivastava')}</h5>\r\n\r\n      <div className=\"link\">\r\n        <a\r\n          href=\"https://github.com/covid19india\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          covid19india\r\n        </a>\r\n      </div>\r\n\r\n      <a\r\n        className=\"button excel\"\r\n        href=\"http://patientdb.covid19india.org\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <Icon.Database />\r\n        <span>{t('Crowdsourced Patient Database')}</span>\r\n      </a>\r\n\r\n      <a\r\n        href=\"https://www.facebook.com/nihal.maharaj.5/\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        className=\"button twitter\"\r\n        style={{justifyContent: 'center'}}\r\n      >\r\n        \r\n        <Icon.Facebook />\r\n        <span>{t('View updates on Facebook')}</span>\r\n      </a>\r\n\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default React.memo(Footer);\r\n","import {ResizeObserver} from '@juggle/resize-observer';\r\nimport {useState, useEffect} from 'react';\r\n\r\nexport const useResizeObserver = (ref) => {\r\n  const [dimensions, setDimensions] = useState(null);\r\n  useEffect(() => {\r\n    const observeTarget = ref.current;\r\n    const resizeObserver = new ResizeObserver((entries, observer) => {\r\n      entries.forEach((entry, index) => {\r\n        setDimensions(entry.contentRect);\r\n      });\r\n    });\r\n    resizeObserver.observe(observeTarget);\r\n    return () => {\r\n      resizeObserver.unobserve(observeTarget);\r\n    };\r\n  }, [ref]);\r\n  return dimensions;\r\n};\r\n","import React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nexport const testedToolTip = (\r\n  <span className=\"tooltip-tested\" onClick={(e) => e.stopPropagation()}>\r\n    <Icon.Info\r\n      data-for=\"tested\"\r\n      data-tip=\"Reporting total samples tested from ICMR data\"\r\n      data-event=\"touchstart mouseover\"\r\n      data-event-off=\"mouseleave\"\r\n    />\r\n    <ReactTooltip\r\n      id=\"tested\"\r\n      place=\"top\"\r\n      type=\"dark\"\r\n      effect=\"solid\"\r\n      multiline={true}\r\n      scrollHide={true}\r\n      globalEventOff=\"click\"\r\n    />\r\n  </span>\r\n);\r\n","import {formatNumber} from '../utils/commonfunctions';\r\n\r\nimport React, {useState} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useEffectOnce} from 'react-use';\r\n\r\nfunction Level(props) {\r\n  const [data, setData] = useState(props.data);\r\n  const {t} = useTranslation();\r\n\r\n  useEffectOnce(() => {\r\n    setData({\r\n      active: +props.data.active,\r\n      confirmed: +props.data.confirmed,\r\n      recovered: +props.data.recovered,\r\n      deaths: +props.data.deaths,\r\n      deltaconfirmed: +props.data.deltaconfirmed,\r\n      deltadeaths: +props.data.deltadeaths,\r\n      deltarecovered: +props.data.deltarecovered,\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div className=\"Level\">\r\n      <div\r\n        className=\"level-item is-cherry fadeInUp\"\r\n        style={{animationDelay: '1s'}}\r\n      >\r\n        <h5>{t('Confirmed')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltaconfirmed)\r\n            ? ''\r\n            : data.deltaconfirmed > 0\r\n            ? '+' + formatNumber(data.deltaconfirmed)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1>{formatNumber(data.confirmed)} </h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-blue fadeInUp\"\r\n        style={{animationDelay: '1.1s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Active')}</h5>\r\n        <h4>&nbsp;</h4>\r\n        <h1 className=\"title has-text-info\">{formatNumber(data.active)}</h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-green fadeInUp\"\r\n        style={{animationDelay: '1.2s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Recovered')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltarecovered)\r\n            ? ''\r\n            : data.deltarecovered > 0\r\n            ? '+' + formatNumber(data.deltarecovered)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1 className=\"title has-text-success\">\r\n          {formatNumber(data.recovered)}{' '}\r\n        </h1>\r\n      </div>\r\n\r\n      <div\r\n        className=\"level-item is-gray fadeInUp\"\r\n        style={{animationDelay: '1.3s'}}\r\n      >\r\n        <h5 className=\"heading\">{t('Deceased')}</h5>\r\n        <h4>\r\n          [\r\n          {isNaN(data.deltadeaths)\r\n            ? ''\r\n            : data.deltadeaths > 0\r\n            ? '+' + formatNumber(data.deltadeaths)\r\n            : '+0'}\r\n          ]\r\n        </h4>\r\n        <h1 className=\"title has-text-grey\">{formatNumber(data.deaths)}</h1>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Level);\r\n","import * as d3 from 'd3';\r\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\r\n\r\nfunction Minigraph({timeseries}) {\r\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\r\n  const svgRef1 = useRef();\r\n  const svgRef2 = useRef();\r\n  const svgRef3 = useRef();\r\n  const svgRef4 = useRef();\r\n\r\n  useEffect(() => {\r\n    setTimeSeriesData(timeseries.slice(timeseries.length - 20));\r\n  }, [timeseries]);\r\n\r\n  const graphData = useCallback((data) => {\r\n    if (data.length <= 1) return 0;\r\n\r\n    const margin = {top: 10, right: 5, bottom: 20, left: 5};\r\n    const chartRight = 100 - margin.right;\r\n    const chartBottom = 100 - margin.bottom;\r\n\r\n    const svg1 = d3.select(svgRef1.current);\r\n    const svg2 = d3.select(svgRef2.current);\r\n    const svg3 = d3.select(svgRef3.current);\r\n    const svg4 = d3.select(svgRef4.current);\r\n\r\n    data.forEach((d) => {\r\n      d['dailyactive'] = d.dailyconfirmed - d.dailyrecovered - d.dailydeceased;\r\n    });\r\n\r\n    const xScale = d3\r\n      .scaleTime()\r\n      .domain(d3.extent(data, (d) => d.date))\r\n      .range([margin.left, chartRight]);\r\n\r\n    const svgArray = [svg1, svg2, svg3, svg4];\r\n    const dataTypes = [\r\n      'dailyconfirmed',\r\n      'dailyactive',\r\n      'dailyrecovered',\r\n      'dailydeceased',\r\n    ];\r\n    const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d'];\r\n\r\n    const dailyMin = d3.min(data, (d) => d.dailyactive);\r\n    const dailyMax = d3.max(data, (d) =>\r\n      Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\r\n    );\r\n    const domainMinMax = Math.max(-dailyMin, dailyMax);\r\n\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([-domainMinMax, domainMinMax])\r\n      .range([chartBottom, margin.top]);\r\n\r\n    svgArray.forEach((svg, i) => {\r\n      const type = dataTypes[i];\r\n      const color = colors[i];\r\n\r\n      const path = svg\r\n        .append('path')\r\n        .datum(data)\r\n        .attr('fill', 'none')\r\n        .attr('stroke', color + '99')\r\n        .attr('stroke-width', 2.5)\r\n        .attr('cursor', 'pointer')\r\n        .attr(\r\n          'd',\r\n          d3\r\n            .line()\r\n            .x((d) => xScale(d.date))\r\n            .y((d) => yScale(d[type]))\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength = path.node().getTotalLength();\r\n      path\r\n        .attr('stroke-dasharray', totalLength + ' ' + totalLength)\r\n        .attr('stroke-dashoffset', totalLength)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .attr('stroke-dashoffset', 0);\r\n\r\n      svg\r\n        .selectAll('.dot')\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append('circle')\r\n        .attr('fill', color)\r\n        .attr('stroke', color)\r\n        .attr('r', 2)\r\n        .attr('cursor', 'pointer')\r\n        .attr('cx', (d) => xScale(d.date))\r\n        .attr('cy', (d) => yScale(d[type]))\r\n        .on('mouseover', (d) => {\r\n          d3.select(d3.event.target).attr('r', '5');\r\n        })\r\n        .on('mouseout', (d) => {\r\n          d3.select(d3.event.target).attr('r', '2');\r\n        })\r\n        .style('opacity', 0)\r\n        .transition()\r\n        .delay(500)\r\n        .duration(2500)\r\n        .style('opacity', 1);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    graphData(timeSeriesData);\r\n  }, [timeSeriesData, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '1.4s'}}>\r\n        <svg\r\n          ref={svgRef1}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{animationDelay: '1.5s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef2}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-green fadeInUp\"\r\n        style={{animationDelay: '1.6s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef3}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-gray fadeInUp\"\r\n        style={{animationDelay: '1.7s'}}\r\n      >\r\n        <svg\r\n          ref={svgRef4}\r\n          width=\"100\"\r\n          height=\"75\"\r\n          viewBox=\"0 0 100 75\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(Minigraph);\r\n","/*\nDetails Element Polyfill 2.4.0\nCopyright  2019 Javan Makhmali\n */\n(function() {\n  \"use strict\";\n  var element = document.createElement(\"details\");\n  var elementIsNative = typeof HTMLDetailsElement != \"undefined\" && element instanceof HTMLDetailsElement;\n  var support = {\n    open: \"open\" in element || elementIsNative,\n    toggle: \"ontoggle\" in element\n  };\n  var styles = '\\ndetails, summary {\\n  display: block;\\n}\\ndetails:not([open]) > *:not(summary) {\\n  display: none;\\n}\\nsummary::before {\\n  content: \"\";\\n  padding-right: 0.3rem;\\n  font-size: 0.6rem;\\n  cursor: default;\\n}\\n[open] > summary::before {\\n  content: \"\";\\n}\\n';\n  var _ref = [], forEach = _ref.forEach, slice = _ref.slice;\n  if (!support.open) {\n    polyfillStyles();\n    polyfillProperties();\n    polyfillToggle();\n    polyfillAccessibility();\n  }\n  if (support.open && !support.toggle) {\n    polyfillToggleEvent();\n  }\n  function polyfillStyles() {\n    document.head.insertAdjacentHTML(\"afterbegin\", \"<style>\" + styles + \"</style>\");\n  }\n  function polyfillProperties() {\n    var prototype = document.createElement(\"details\").constructor.prototype;\n    var setAttribute = prototype.setAttribute, removeAttribute = prototype.removeAttribute;\n    var open = Object.getOwnPropertyDescriptor(prototype, \"open\");\n    Object.defineProperties(prototype, {\n      open: {\n        get: function get() {\n          if (this.tagName == \"DETAILS\") {\n            return this.hasAttribute(\"open\");\n          } else {\n            if (open && open.get) {\n              return open.get.call(this);\n            }\n          }\n        },\n        set: function set(value) {\n          if (this.tagName == \"DETAILS\") {\n            return value ? this.setAttribute(\"open\", \"\") : this.removeAttribute(\"open\");\n          } else {\n            if (open && open.set) {\n              return open.set.call(this, value);\n            }\n          }\n        }\n      },\n      setAttribute: {\n        value: function value(name, _value) {\n          var _this = this;\n          var call = function call() {\n            return setAttribute.call(_this, name, _value);\n          };\n          if (name == \"open\" && this.tagName == \"DETAILS\") {\n            var wasOpen = this.hasAttribute(\"open\");\n            var result = call();\n            if (!wasOpen) {\n              var summary = this.querySelector(\"summary\");\n              if (summary) summary.setAttribute(\"aria-expanded\", true);\n              triggerToggle(this);\n            }\n            return result;\n          }\n          return call();\n        }\n      },\n      removeAttribute: {\n        value: function value(name) {\n          var _this2 = this;\n          var call = function call() {\n            return removeAttribute.call(_this2, name);\n          };\n          if (name == \"open\" && this.tagName == \"DETAILS\") {\n            var wasOpen = this.hasAttribute(\"open\");\n            var result = call();\n            if (wasOpen) {\n              var summary = this.querySelector(\"summary\");\n              if (summary) summary.setAttribute(\"aria-expanded\", false);\n              triggerToggle(this);\n            }\n            return result;\n          }\n          return call();\n        }\n      }\n    });\n  }\n  function polyfillToggle() {\n    onTogglingTrigger(function(element) {\n      element.hasAttribute(\"open\") ? element.removeAttribute(\"open\") : element.setAttribute(\"open\", \"\");\n    });\n  }\n  function polyfillToggleEvent() {\n    if (window.MutationObserver) {\n      new MutationObserver(function(mutations) {\n        forEach.call(mutations, function(mutation) {\n          var target = mutation.target, attributeName = mutation.attributeName;\n          if (target.tagName == \"DETAILS\" && attributeName == \"open\") {\n            triggerToggle(target);\n          }\n        });\n      }).observe(document.documentElement, {\n        attributes: true,\n        subtree: true\n      });\n    } else {\n      onTogglingTrigger(function(element) {\n        var wasOpen = element.getAttribute(\"open\");\n        setTimeout(function() {\n          var isOpen = element.getAttribute(\"open\");\n          if (wasOpen != isOpen) {\n            triggerToggle(element);\n          }\n        }, 1);\n      });\n    }\n  }\n  function polyfillAccessibility() {\n    setAccessibilityAttributes(document);\n    if (window.MutationObserver) {\n      new MutationObserver(function(mutations) {\n        forEach.call(mutations, function(mutation) {\n          forEach.call(mutation.addedNodes, setAccessibilityAttributes);\n        });\n      }).observe(document.documentElement, {\n        subtree: true,\n        childList: true\n      });\n    } else {\n      document.addEventListener(\"DOMNodeInserted\", function(event) {\n        setAccessibilityAttributes(event.target);\n      });\n    }\n  }\n  function setAccessibilityAttributes(root) {\n    findElementsWithTagName(root, \"SUMMARY\").forEach(function(summary) {\n      var details = findClosestElementWithTagName(summary, \"DETAILS\");\n      summary.setAttribute(\"aria-expanded\", details.hasAttribute(\"open\"));\n      if (!summary.hasAttribute(\"tabindex\")) summary.setAttribute(\"tabindex\", \"0\");\n      if (!summary.hasAttribute(\"role\")) summary.setAttribute(\"role\", \"button\");\n    });\n  }\n  function eventIsSignificant(event) {\n    return !(event.defaultPrevented || event.ctrlKey || event.metaKey || event.shiftKey || event.target.isContentEditable);\n  }\n  function onTogglingTrigger(callback) {\n    addEventListener(\"click\", function(event) {\n      if (eventIsSignificant(event)) {\n        if (event.which <= 1) {\n          var element = findClosestElementWithTagName(event.target, \"SUMMARY\");\n          if (element && element.parentNode && element.parentNode.tagName == \"DETAILS\") {\n            callback(element.parentNode);\n          }\n        }\n      }\n    }, false);\n    addEventListener(\"keydown\", function(event) {\n      if (eventIsSignificant(event)) {\n        if (event.keyCode == 13 || event.keyCode == 32) {\n          var element = findClosestElementWithTagName(event.target, \"SUMMARY\");\n          if (element && element.parentNode && element.parentNode.tagName == \"DETAILS\") {\n            callback(element.parentNode);\n            event.preventDefault();\n          }\n        }\n      }\n    }, false);\n  }\n  function triggerToggle(element) {\n    var event = document.createEvent(\"Event\");\n    event.initEvent(\"toggle\", false, false);\n    element.dispatchEvent(event);\n  }\n  function findElementsWithTagName(root, tagName) {\n    return (root.tagName == tagName ? [ root ] : []).concat(typeof root.getElementsByTagName == \"function\" ? slice.call(root.getElementsByTagName(tagName)) : []);\n  }\n  function findClosestElementWithTagName(element, tagName) {\n    if (typeof element.closest == \"function\") {\n      return element.closest(tagName);\n    } else {\n      while (element) {\n        if (element.tagName == tagName) {\n          return element;\n        } else {\n          element = element.parentNode;\n        }\n      }\n    }\n  }\n})();\n","import {MAP_STATISTICS} from '../constants';\r\nimport {capitalizeAll, formatNumber} from '../utils/commonfunctions';\r\nimport {useResizeObserver} from '../utils/hooks';\r\n\r\nimport * as d3 from 'd3';\r\nimport React, {useEffect, useRef} from 'react';\r\n\r\nfunction MapLegend({mapScale, statistic, mapStatistic, mapOption}) {\r\n  const svgRef = useRef(null);\r\n  const wrapperRef = useRef();\r\n  const dimensions = useResizeObserver(wrapperRef);\r\n\r\n  useEffect(() => {\r\n    const svg = d3.select(svgRef.current);\r\n    const {width, height} =\r\n      dimensions || wrapperRef.current.getBoundingClientRect();\r\n\r\n    if (mapStatistic === MAP_STATISTICS.ZONE) {\r\n      svg.call(() =>\r\n        legend({\r\n          svg: svg,\r\n          color: mapScale,\r\n          width: width,\r\n          height: height,\r\n          tickValues: [],\r\n          marginLeft: 2,\r\n          marginRight: 20,\r\n          ordinalWeights: Object.values(statistic),\r\n        })\r\n      );\r\n    } else if (mapStatistic === MAP_STATISTICS.HOTSPOTS) {\r\n      const t = svg.transition().duration(500);\r\n      svg\r\n        .select('.ramp')\r\n        .transition(t)\r\n        .attr('opacity', 0)\r\n        .attr('xlink:href', null);\r\n\r\n      svg\r\n        .select('.bars')\r\n        .selectAll('rect')\r\n        .transition(t)\r\n        .attr('opacity', 0)\r\n        .remove();\r\n      svg.selectAll('.axis > *').remove();\r\n\r\n      const domainMax = mapScale.domain()[1];\r\n\r\n      const legend = svg\r\n        .select('.circles')\r\n        .attr('transform', `translate(48,40)`)\r\n        .attr('text-anchor', 'middle');\r\n\r\n      legend\r\n        .selectAll('circle')\r\n        .data([domainMax / 10, (domainMax * 2) / 5, domainMax])\r\n        .join('circle')\r\n        .attr('fill', 'none')\r\n        .attr('stroke', '#ccc')\r\n        .transition(t)\r\n        .attr('cy', (d) => -mapScale(d))\r\n        .attr('r', mapScale);\r\n\r\n      const yScale = mapScale.copy().range([0, -2 * mapScale(domainMax)]);\r\n\r\n      svg\r\n        .select('.circleAxis')\r\n        .attr('transform', `translate(48,50)`)\r\n        .transition(t)\r\n        .call(\r\n          d3\r\n            .axisRight(yScale)\r\n            .tickSize(0)\r\n            .tickPadding(0)\r\n            .tickValues([domainMax / 10, (domainMax * 2) / 5, domainMax])\r\n            .tickFormat(d3.format('0~s'))\r\n        )\r\n        .selectAll('.tick text')\r\n        .style('text-anchor', 'middle');\r\n\r\n      svg.select('.circleAxis').call((g) => g.select('.domain').remove());\r\n    } else {\r\n      svg.call(() =>\r\n        legend({\r\n          svg: svg,\r\n          color: mapScale,\r\n          title:\r\n            capitalizeAll(mapOption) +\r\n            (mapStatistic === MAP_STATISTICS.PER_MILLION\r\n              ? ' cases per million'\r\n              : ' cases'),\r\n          width: width,\r\n          height: height,\r\n          ticks: 5,\r\n          tickFormat: function (d, i, n) {\r\n            if (mapStatistic === MAP_STATISTICS.TOTAL && !Number.isInteger(d))\r\n              return;\r\n            if (i === n.length - 1) return formatNumber(d) + '+';\r\n            return formatNumber(d);\r\n          },\r\n          marginLeft: 2,\r\n          marginRight: 20,\r\n        })\r\n      );\r\n    }\r\n    svg.attr('class', mapStatistic === MAP_STATISTICS.ZONE ? 'zone' : '');\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className=\"svg-parent maplegend fadeInUp\"\r\n      style={{animationDelay: '2.5s', height: 50}}\r\n      ref={wrapperRef}\r\n    >\r\n      <svg id=\"legend\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\r\n        <image className=\"ramp\" />\r\n        <g className=\"bars\"></g>\r\n        <g className=\"circles\"></g>\r\n        <g className=\"circleAxis\"></g>\r\n        <g className=\"axis\">\r\n          <text className=\"axistext\" />\r\n        </g>\r\n      </svg>\r\n      <canvas\r\n        className=\"color-scale\"\r\n        style={{position: 'absolute', height: 0}}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MapLegend;\r\n\r\nfunction legend({\r\n  svg,\r\n  color,\r\n  title,\r\n  tickSize = 6,\r\n  width = 320,\r\n  height = 44 + tickSize,\r\n  marginTop = 18,\r\n  marginRight = 0,\r\n  marginBottom = 16 + tickSize,\r\n  marginLeft = 0,\r\n  ticks = width / 64,\r\n  tickFormat,\r\n  tickValues,\r\n  ordinalWeights,\r\n} = {}) {\r\n  svg.selectAll('.circles > *').remove();\r\n  svg.selectAll('.circleAxis > *').remove();\r\n  const t = svg.transition().duration(500);\r\n\r\n  let tickAdjust = (g) => {\r\n    const ticks = g.selectAll('.tick line');\r\n    ticks.attr('y1', marginTop + marginBottom - height);\r\n    // d3.select(ticks.nodes()[ticks.size() - 1]).remove();\r\n  };\r\n  let x;\r\n\r\n  // Continuous\r\n  if (color.interpolate) {\r\n    const n = Math.min(color.domain().length, color.range().length);\r\n\r\n    x = color\r\n      .copy()\r\n      .rangeRound(\r\n        d3.quantize(d3.interpolate(marginLeft, width - marginRight), n)\r\n      );\r\n\r\n    svg\r\n      .select('.ramp')\r\n      .attr('class', 'ramp')\r\n      .attr('x', marginLeft)\r\n      .attr('y', marginTop)\r\n      .attr('width', width - marginLeft - marginRight)\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('preserveAspectRatio', 'none')\r\n      .attr(\r\n        'xlink:href',\r\n        ramp(\r\n          color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))\r\n        ).toDataURL()\r\n      );\r\n  }\r\n\r\n  // Sequential\r\n  else if (color.interpolator) {\r\n    svg\r\n      .select('.bars')\r\n      .selectAll('rect')\r\n      .transition(t)\r\n      .attr('opacity', 0)\r\n      .remove();\r\n\r\n    x = Object.assign(\r\n      color\r\n        .copy()\r\n        .interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\r\n      {\r\n        range() {\r\n          return [marginLeft, width - marginRight];\r\n        },\r\n      }\r\n    );\r\n\r\n    svg\r\n      .select('.ramp')\r\n      .attr('class', 'ramp')\r\n      .attr('x', marginLeft)\r\n      .attr('y', marginTop)\r\n      .attr('width', width - marginLeft - marginRight)\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('preserveAspectRatio', 'none')\r\n      .attr('xlink:href', ramp(color.interpolator()).toDataURL())\r\n      .transition(t)\r\n      .attr('opacity', 1);\r\n\r\n    // scaleSequentialQuantile doesnt implement ticks or tickFormat.\r\n    if (!x.ticks) {\r\n      if (tickValues === undefined) {\r\n        const n = Math.round(ticks + 1);\r\n        tickValues = d3\r\n          .range(n)\r\n          .map((i) => d3.quantile(color.domain(), i / (n - 1)));\r\n      }\r\n      if (typeof tickFormat !== 'function') {\r\n        tickFormat = d3.format(tickFormat === undefined ? ',f' : tickFormat);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Threshold\r\n  else if (color.invertExtent) {\r\n    const thresholds = color.thresholds\r\n      ? color.thresholds() // scaleQuantize\r\n      : color.quantiles\r\n      ? color.quantiles() // scaleQuantile\r\n      : color.domain(); // scaleThreshold\r\n\r\n    const thresholdFormat =\r\n      tickFormat === undefined\r\n        ? (d) => d\r\n        : typeof tickFormat === 'string'\r\n        ? d3.format(tickFormat)\r\n        : tickFormat;\r\n\r\n    x = d3\r\n      .scaleLinear()\r\n      .domain([-1, color.range().length - 1])\r\n      .rangeRound([marginLeft, width - marginRight]);\r\n\r\n    svg\r\n      .append('g')\r\n      .selectAll('rect')\r\n      .data(color.range())\r\n      .join('rect')\r\n      .attr('x', (d, i) => x(i - 1))\r\n      .attr('y', marginTop)\r\n      .attr('width', (d, i) => x(i) - x(i - 1))\r\n      .attr('height', height - marginTop - marginBottom)\r\n      .attr('fill', (d) => d);\r\n\r\n    tickValues = d3.range(-1, thresholds.length);\r\n    tickFormat = (i) => {\r\n      if (i === -1) return thresholdFormat(1);\r\n      else if (i === thresholds.length - 1) return;\r\n      else if (i === thresholds.length - 2)\r\n        return thresholdFormat(thresholds[i] + '+', i);\r\n      return thresholdFormat(thresholds[i], i);\r\n    };\r\n  }\r\n\r\n  // Ordinal\r\n  else {\r\n    svg\r\n      .select('.ramp')\r\n      .transition(t)\r\n      .attr('opacity', 0)\r\n      .attr('xlink:href', null);\r\n    if (!ordinalWeights) {\r\n      x = d3\r\n        .scaleBand()\r\n        .domain(color.domain())\r\n        .rangeRound([marginLeft, width - marginRight]);\r\n      svg\r\n        .selectAll('rect')\r\n        .data(color.domain())\r\n        .join('rect')\r\n        .attr('x', x)\r\n        .attr('y', marginTop)\r\n        .attr('width', Math.max(0, x.bandwidth() - 1))\r\n        .attr('height', height - marginTop - marginBottom)\r\n        .attr('fill', color);\r\n    } else {\r\n      const widthScale = d3\r\n        .scaleLinear()\r\n        .domain([0, ordinalWeights.reduce((a, b) => a + b)])\r\n        .rangeRound([0, width - marginLeft - marginRight]);\r\n\r\n      const xPos = ordinalWeights.map((w, i) =>\r\n        ordinalWeights\r\n          .slice(0, i)\r\n          .reduce((acc, w) => acc + widthScale(w), marginLeft)\r\n      );\r\n\r\n      x = d3.scaleOrdinal().domain(color.domain()).range(xPos);\r\n\r\n      svg\r\n        .select('.bars')\r\n        .selectAll('rect')\r\n        .data(color.domain())\r\n        .join((enter) =>\r\n          enter\r\n            .append('rect')\r\n            .attr('x', x)\r\n            .attr('width', (d, i) => widthScale(ordinalWeights[i]))\r\n        )\r\n        .attr('y', marginTop)\r\n        .attr('height', height - marginTop - marginBottom)\r\n        .attr('fill', color)\r\n        .transition(t)\r\n        .attr('x', x)\r\n        .attr('width', (d, i) => widthScale(ordinalWeights[i]))\r\n        .attr('opacity', 1);\r\n    }\r\n\r\n    tickAdjust = () => {};\r\n  }\r\n\r\n  svg\r\n    .select('.axis')\r\n    .attr('transform', `translate(0,${height - marginBottom})`)\r\n    .transition(t)\r\n    .attr('class', 'axis')\r\n    .call(\r\n      d3\r\n        .axisBottom(x)\r\n        .ticks(ticks, typeof tickFormat === 'string' ? tickFormat : undefined)\r\n        .tickFormat(typeof tickFormat === 'function' ? tickFormat : undefined)\r\n        .tickSize(tickSize)\r\n        .tickValues(tickValues)\r\n    )\r\n    .on('start', () => {\r\n      svg.call(tickAdjust).call((svg) => svg.select('.domain').remove());\r\n    })\r\n    .call((g) =>\r\n      g\r\n        .select('.axistext')\r\n        .attr('class', 'axistext')\r\n        .attr('x', marginLeft)\r\n        .attr('y', marginTop + marginBottom - height - 6)\r\n        .attr('fill', 'currentColor')\r\n        .attr('text-anchor', 'start')\r\n        .attr('font-weight', 'bold')\r\n        .text(title)\r\n    );\r\n\r\n  return svg.node();\r\n}\r\n\r\nfunction ramp(color, n = 256) {\r\n  // const canvas = document.createElement('canvas');\r\n  const canvas = d3.select('.color-scale').node();\r\n  const context = ((canvas.width = n), (canvas.height = 1), canvas).getContext(\r\n    '2d'\r\n  );\r\n  for (let i = 0; i < n; ++i) {\r\n    context.fillStyle = color(i / (n - 1));\r\n    context.fillRect(i, 0, 1, 1);\r\n  }\r\n  return canvas;\r\n}\r\n","import MapLegend from './maplegend';\r\n\r\nimport {MAP_META, MAP_STATISTICS, MAP_TYPES, MAP_VIEWS} from '../constants';\r\nimport {capitalizeAll} from '../utils/commonfunctions';\r\n\r\nimport * as d3 from 'd3';\r\nimport React, {useCallback, useEffect, useMemo, useRef} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport useSWR from 'swr';\r\nimport * as topojson from 'topojson';\r\n\r\nconst colorInterpolator = (caseType, t) => {\r\n  switch (caseType) {\r\n    case 'confirmed':\r\n      return d3.interpolateReds(t * 0.85);\r\n    case 'active':\r\n      return d3.interpolateBlues(t * 0.85);\r\n    case 'recovered':\r\n      return d3.interpolateGreens(t * 0.85);\r\n    case 'deceased':\r\n      return d3.interpolateGreys(t * 0.85);\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nconst caseColor = (caseType, alpha = '') => {\r\n  switch (caseType) {\r\n    case 'confirmed':\r\n      return '#ff073a' + alpha;\r\n    case 'active':\r\n      return '#007bff' + alpha;\r\n    case 'recovered':\r\n      return '#28a745' + alpha;\r\n    case 'deceased':\r\n      return '#6c757d' + alpha;\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nfunction ChoroplethMap({\r\n  statistic,\r\n  mapData,\r\n  currentMap,\r\n  changeMap,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  mapOption,\r\n  isCountryLoaded,\r\n}) {\r\n  const {t} = useTranslation();\r\n  const svgRef = useRef(null);\r\n\r\n  const mapMeta = MAP_META[currentMap.name];\r\n  const geoDataResponse = useSWR(mapMeta.geoDataFile, async (file) => {\r\n    return await d3.json(file);\r\n  });\r\n\r\n  const mapScale = useMemo(() => {\r\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n      return d3.scaleOrdinal(\r\n        ['Red', 'Orange', 'Green'],\r\n        ['#d73027', '#fee08b', '#66bd63']\r\n      );\r\n    } else if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n      const {width} = svgRef.current.getBoundingClientRect();\r\n      return d3\r\n        .scaleSqrt([0, statistic[mapOption].max], [0, width / 10])\r\n        .clamp(true)\r\n        .nice(3);\r\n    } else {\r\n      return d3\r\n        .scaleSequential([0, Math.max(1, statistic[mapOption].max)], (t) =>\r\n          colorInterpolator(mapOption, t)\r\n        )\r\n        .clamp(true);\r\n    }\r\n  }, [currentMap.stat, statistic, mapOption]);\r\n\r\n  useEffect(() => {\r\n    if (!geoDataResponse.data) return;\r\n    const geoData = geoDataResponse.data;\r\n\r\n    const topology = topojson.feature(\r\n      geoData,\r\n      geoData.objects[mapMeta.graphObjectStates || mapMeta.graphObjectDistricts]\r\n    );\r\n\r\n    const svg = d3.select(svgRef.current);\r\n\r\n    if (!svg.attr('viewBox')) {\r\n      const {\r\n        width: widthDefault,\r\n        height: heightDefault,\r\n      } = svgRef.current.getBoundingClientRect();\r\n      const projection = isCountryLoaded\r\n        ? d3.geoMercator().fitWidth(widthDefault, topology)\r\n        : d3.geoMercator().fitSize([widthDefault, heightDefault], topology);\r\n      const path = d3.geoPath(projection);\r\n      const bBox = path.bounds(topology);\r\n      const [width, height] = [+bBox[1][0], bBox[1][1]];\r\n      svg.attr('viewBox', `0 0 ${width} ${height}`);\r\n    }\r\n    const bBox = svg.attr('viewBox').split(' ');\r\n    const [width, height] = [+bBox[2], +bBox[3]];\r\n\r\n    const projection = d3.geoMercator().fitSize([width, height], topology);\r\n    const path = d3.geoPath(projection);\r\n\r\n    // Add id to each feature\r\n    let features =\r\n      currentMap.stat !== MAP_STATISTICS.HOTSPOTS\r\n        ? currentMap.view === MAP_VIEWS.STATES\r\n          ? topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectStates]\r\n            ).features\r\n          : topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectDistricts]\r\n            ).features\r\n        : [\r\n            ...topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectStates]\r\n            ).features,\r\n            ...topojson.feature(\r\n              geoData,\r\n              geoData.objects[mapMeta.graphObjectDistricts]\r\n            ).features,\r\n          ];\r\n\r\n    features = features.map((f) => {\r\n      const district = f.properties.district;\r\n      const state = f.properties.st_nm;\r\n      const obj = Object.assign({}, f);\r\n      obj.id = `${currentMap.name}-${state}${district ? '-' + district : ''}`;\r\n      return obj;\r\n    });\r\n\r\n    /* Draw map */\r\n    const t = d3.transition().duration(500);\r\n    let onceTouchedRegion = null;\r\n    const regionSelection = svg\r\n      .select('.regions')\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.stat !== MAP_STATISTICS.HOTSPOTS ? features : [],\r\n        (d) => d.id\r\n      )\r\n      .join((enter) => {\r\n        const sel = enter\r\n          .append('path')\r\n          .attr('d', path)\r\n          .attr('stroke-width', 2)\r\n          .attr('stroke-opacity', 0)\r\n          .style('cursor', 'pointer')\r\n          .on('mouseenter', (d) => {\r\n            const region = {state: d.properties.st_nm};\r\n            if (d.properties.district) region.district = d.properties.district;\r\n            setRegionHighlighted(region);\r\n          })\r\n          .on('mouseleave', (d) => {\r\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\r\n          })\r\n          .on('touchstart', (d) => {\r\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\r\n            else onceTouchedRegion = d;\r\n          })\r\n          .on('click', (d) => {\r\n            d3.event.stopPropagation();\r\n            if (onceTouchedRegion || mapMeta.mapType === MAP_TYPES.STATE)\r\n              return;\r\n            // Disable pointer events till the new map is rendered\r\n            svg.attr('pointer-events', 'none');\r\n            svg\r\n              .select('.regions')\r\n              .selectAll('path')\r\n              .attr('pointer-events', 'none');\r\n            // Switch map\r\n            changeMap(d.properties.st_nm);\r\n          });\r\n        sel.append('title');\r\n        return sel;\r\n      })\r\n      .attr('pointer-events', 'none');\r\n\r\n    regionSelection\r\n      .transition(t)\r\n      .attr('fill', (d) => {\r\n        let n;\r\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n          const state = d.properties.st_nm;\r\n          const district = d.properties.district;\r\n          n =\r\n            mapData[state] && mapData[state][district]\r\n              ? mapData[state][district]\r\n              : 0;\r\n        } else {\r\n          const state = d.properties.st_nm;\r\n          const district = d.properties.district;\r\n          if (district)\r\n            n =\r\n              mapData[state] &&\r\n              mapData[state][district] &&\r\n              mapData[state][district][mapOption]\r\n                ? mapData[state][district][mapOption]\r\n                : 0;\r\n          else\r\n            n =\r\n              mapData[state] && mapData[state][mapOption]\r\n                ? mapData[state][mapOption]\r\n                : 0;\r\n        }\r\n        const color = n === 0 ? '#ffffff00' : mapScale(n);\r\n        return color;\r\n      })\r\n      .attr(\r\n        'stroke',\r\n        currentMap.stat === MAP_STATISTICS.ZONE\r\n          ? '#343a40'\r\n          : caseColor(mapOption)\r\n      )\r\n      .on('end', function () {\r\n        d3.select(this).attr('pointer-events', 'all');\r\n      });\r\n\r\n    regionSelection.select('title').text((d) => {\r\n      if (currentMap.stat === MAP_STATISTICS.TOTAL) {\r\n        const state = d.properties.st_nm;\r\n        const district = d.properties.district;\r\n        let n;\r\n        if (district)\r\n          n =\r\n            mapData[state] && mapData[state][district]\r\n              ? mapData[state][district][mapOption]\r\n              : 0;\r\n        else n = mapData[state] ? mapData[state][mapOption] : 0;\r\n        return (\r\n          Number(\r\n            parseFloat(\r\n              100 * (n / (statistic[mapOption].total || 0.001))\r\n            ).toFixed(2)\r\n          ).toString() +\r\n          '% from ' +\r\n          capitalizeAll(district ? district : state)\r\n        );\r\n      }\r\n    });\r\n\r\n    svg\r\n      .transition()\r\n      .duration(mapMeta.mapType === MAP_TYPES.STATE ? t.duration() / 2 : 0)\r\n      .on('end', () =>\r\n        svg.attr('class', currentMap.stat === MAP_STATISTICS.ZONE ? 'zone' : '')\r\n      );\r\n\r\n    /* ----------BUBBLE MAP----------*/\r\n    let circlesData = [];\r\n    if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n      circlesData = features\r\n        .map((d) => {\r\n          const district = d.properties.district;\r\n          const state = d.properties.st_nm;\r\n          if (district) {\r\n            d.value =\r\n              mapData[state] && mapData[state][district]\r\n                ? mapData[state][district][mapOption]\r\n                : 0;\r\n          } else {\r\n            d.value =\r\n              mapData[state] && mapData[state].Unknown\r\n                ? mapData[state].Unknown[mapOption]\r\n                : 0;\r\n          }\r\n          return d;\r\n        })\r\n        .sort((a, b) => b.value - a.value);\r\n    }\r\n\r\n    svg\r\n      .select('.circles')\r\n      .selectAll('circle')\r\n      .data(circlesData, (d) => d.id)\r\n      .join((enter) =>\r\n        enter\r\n          .append('circle')\r\n          .attr('transform', (d) => `translate(${path.centroid(d)})`)\r\n          .attr('fill-opacity', 0.5)\r\n          .style('cursor', 'pointer')\r\n          .attr('pointer-events', 'all')\r\n          .on('mouseenter', (d) => {\r\n            const region = {\r\n              state: d.properties.st_nm,\r\n              district: d.properties.district || 'Unknown',\r\n            };\r\n            setRegionHighlighted(region);\r\n          })\r\n          .on('click', () => {\r\n            d3.event.stopPropagation();\r\n          })\r\n      )\r\n      .transition(t)\r\n      .attr('fill', caseColor(mapOption, '70'))\r\n      .attr('stroke', caseColor(mapOption, '70'))\r\n      .attr('r', (d) => mapScale(d.value));\r\n    /* ------------------------------*/\r\n\r\n    let meshStates = [];\r\n    if (mapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n      meshStates = [\r\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectStates]),\r\n      ];\r\n      meshStates[0].id = mapMeta.graphObjectStates;\r\n    }\r\n    let meshDistricts = [];\r\n    if (currentMap.view === MAP_VIEWS.DISTRICTS) {\r\n      // Add id to mesh\r\n      meshDistricts = [\r\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectDistricts]),\r\n      ];\r\n      meshDistricts[0].id = mapMeta.graphObjectDistricts;\r\n    }\r\n\r\n    svg\r\n      .select(\r\n        currentMap.view === MAP_VIEWS.STATES\r\n          ? '.state-borders'\r\n          : '.district-borders'\r\n      )\r\n      .attr('fill', 'none')\r\n      .attr('stroke-width', function () {\r\n        return mapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n          currentMap.view === MAP_VIEWS.DISTRICTS\r\n          ? 0\r\n          : width / 250;\r\n      })\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.view === MAP_VIEWS.STATES ? meshStates : meshDistricts,\r\n        (d) => d.id\r\n      )\r\n      .join((enter) => enter.append('path').attr('d', path))\r\n      .transition(t)\r\n      .attr('stroke', () => {\r\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n          return '#00000060';\r\n        } else {\r\n          return caseColor(mapOption, '30');\r\n        }\r\n      });\r\n\r\n    svg\r\n      .select(\r\n        currentMap.view === MAP_VIEWS.STATES\r\n          ? '.district-borders'\r\n          : '.state-borders'\r\n      )\r\n      .selectAll('path')\r\n      .data(\r\n        currentMap.view === MAP_VIEWS.STATES ? meshDistricts : meshStates,\r\n        (d) => d.id\r\n      )\r\n      .join((enter) =>\r\n        enter\r\n          .append('path')\r\n          .attr('d', path)\r\n          .attr('fill', 'none')\r\n          .attr('stroke-width', width / 250)\r\n      )\r\n      .transition(t)\r\n      .attr('stroke', '#343a4099');\r\n\r\n    // Reset on tapping outside map\r\n    svg.attr('pointer-events', 'auto').on('click', () => {\r\n      if (mapMeta.mapType !== MAP_TYPES.STATE) {\r\n        setRegionHighlighted({\r\n          state: 'Total',\r\n        });\r\n      }\r\n    });\r\n  }, [\r\n    geoDataResponse.data,\r\n    mapMeta,\r\n    currentMap,\r\n    setRegionHighlighted,\r\n    changeMap,\r\n    isCountryLoaded,\r\n    mapScale,\r\n    statistic,\r\n    mapData,\r\n    mapOption,\r\n  ]);\r\n\r\n  const highlightRegionInMap = useCallback(\r\n    (state, district) => {\r\n      const svg = d3.select(svgRef.current);\r\n      if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\r\n        svg\r\n          .select('.circles')\r\n          .selectAll('circle')\r\n          .attr('fill-opacity', (d) => {\r\n            const highlighted =\r\n              district &&\r\n              state === d.properties.st_nm &&\r\n              (district === d.properties.district ||\r\n                (district === 'Unknown' && !d.properties.district));\r\n            return highlighted ? 1 : 0.5;\r\n          });\r\n      } else {\r\n        svg\r\n          .select('.regions')\r\n          .selectAll('path')\r\n          .each(function (d) {\r\n            const highlighted =\r\n              district === d.properties?.district &&\r\n              state === d.properties.st_nm;\r\n            if (highlighted) this.parentNode.appendChild(this);\r\n            d3.select(this).attr('stroke-opacity', highlighted ? 1 : 0);\r\n          });\r\n      }\r\n    },\r\n    [currentMap.stat]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!geoDataResponse.data) return;\r\n    highlightRegionInMap(regionHighlighted.state, regionHighlighted.district);\r\n  }, [\r\n    geoDataResponse.data,\r\n    highlightRegionInMap,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n    mapOption,\r\n  ]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '2.5s'}}>\r\n        <svg id=\"chart\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\r\n          <g className=\"regions\" />\r\n          <g className=\"state-borders\" />\r\n          {currentMap.view === MAP_VIEWS.DISTRICTS && (\r\n            <g className=\"district-borders\" />\r\n          )}\r\n          {currentMap.stat === MAP_STATISTICS.HOTSPOTS && (\r\n            <g className=\"circles\" />\r\n          )}\r\n        </svg>\r\n        {mapMeta.mapType === MAP_TYPES.STATE &&\r\n        mapData[currentMap.name]?.Unknown &&\r\n        mapData[currentMap.name]?.Unknown[mapOption] ? (\r\n          <div className=\"disclaimer\">\r\n            <Icon.AlertCircle />\r\n            {t('District-wise {{mapOption}} numbers are under reconciliation', {\r\n              mapOption: t(mapOption),\r\n            })}\r\n          </div>\r\n        ) : (\r\n          ''\r\n        )}\r\n      </div>\r\n\r\n      {mapScale && (\r\n        <MapLegend\r\n          mapScale={mapScale}\r\n          statistic={statistic}\r\n          mapStatistic={currentMap.stat}\r\n          mapOption={mapOption}\r\n        />\r\n      )}\r\n\r\n      <svg style={{position: 'absolute', height: 0}}>\r\n        <defs>\r\n          <filter id=\"balance-color\" colorInterpolationFilters=\"sRGB\">\r\n            <feColorMatrix\r\n              type=\"matrix\"\r\n              values=\"0.91372549  0           0            0  0.08627451\r\n                      0           0.91372549  0            0  0.08627451\r\n                      0           0           0.854901961  0  0.145098039\r\n                      0           0           0            1  0\"\r\n            />\r\n          </filter>\r\n        </defs>\r\n      </svg>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ChoroplethMap;\r\n","import ChoroplethMap from './choropleth';\r\nimport {testedToolTip} from './tooltips';\r\n\r\nimport {\r\n  MAP_META,\r\n  MAP_STATISTICS,\r\n  MAP_TYPES,\r\n  MAP_VIEWS,\r\n  STATE_CODES_REVERSE,\r\n  STATE_POPULATIONS,\r\n} from '../constants';\r\nimport {\r\n  formatDate,\r\n  formatNumber,\r\n  formatDayMonth,\r\n  formatLastUpdated,\r\n} from '../utils/commonfunctions';\r\n\r\nimport {parse} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useEffect, useMemo, useCallback} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.mapOption, currProps.mapOption)) {\r\n    return false;\r\n  }\r\n  if (!equal(prevProps.anchor, currProps.anchor)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nconst getRegionFromState = (state) => {\r\n  if (!state) return;\r\n  const region = {...state};\r\n  return region;\r\n};\r\n\r\nconst getRegionFromDistrict = (districtData, name) => {\r\n  if (!districtData) return;\r\n  const region = {...districtData};\r\n  return region;\r\n};\r\n\r\nfunction MapExplorer({\r\n  mapName,\r\n  states,\r\n  districts,\r\n  zones,\r\n  stateTestData,\r\n  regionHighlighted,\r\n  setRegionHighlighted,\r\n  anchor,\r\n  setAnchor,\r\n  mapOption,\r\n  setMapOption,\r\n  isCountryLoaded = true,\r\n}) {\r\n  const {t} = useTranslation();\r\n  const [currentMap, setCurrentMap] = useState({\r\n    name: mapName,\r\n    stat: MAP_STATISTICS.TOTAL,\r\n    view:\r\n      MAP_META[mapName].mapType === MAP_TYPES.COUNTRY\r\n        ? MAP_VIEWS.STATES\r\n        : MAP_VIEWS.DISTRICTS,\r\n  });\r\n  const currentMapMeta = MAP_META[currentMap.name];\r\n\r\n  const [statistic, currentMapData] = useMemo(() => {\r\n    let currentMapData = {};\r\n    let statistic = {};\r\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\r\n      const dataTypes = ['Red', 'Orange', 'Green'];\r\n      statistic = dataTypes.reduce((acc, dtype) => {\r\n        acc[dtype] = 0;\r\n        return acc;\r\n      }, {});\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n        currentMapData = Object.keys(zones).reduce((acc1, state) => {\r\n          acc1[state] = Object.keys(zones[state]).reduce((acc2, district) => {\r\n            const zone = zones[state][district].zone;\r\n            if (zone) {\r\n              acc2[district] = zone;\r\n              statistic[zone] += 1;\r\n            }\r\n            return acc2;\r\n          }, {});\r\n          return acc1;\r\n        }, {});\r\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const state = currentMap.name;\r\n        currentMapData[state] = Object.keys(zones[state]).reduce(\r\n          (acc, district) => {\r\n            const zone = zones[state][district].zone;\r\n            if (zone) {\r\n              acc[district] = zone;\r\n              statistic[zone] += 1;\r\n            }\r\n            return acc;\r\n          },\r\n          {}\r\n        );\r\n      }\r\n    } else {\r\n      const dataTypes = ['confirmed', 'active', 'recovered', 'deceased'];\r\n      statistic = dataTypes.reduce((acc, dtype) => {\r\n        acc[dtype] = {total: 0, max: 0};\r\n        return acc;\r\n      }, {});\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\r\n        if (currentMap.view === MAP_VIEWS.STATES) {\r\n          currentMapData = states.reduce((acc, state) => {\r\n            acc[state.state] = {};\r\n            dataTypes.forEach((dtype) => {\r\n              let typeCount =\r\n                parseInt(state[dtype !== 'deceased' ? dtype : 'deaths']) || 0;\r\n              if (currentMap.stat === MAP_STATISTICS.PER_MILLION)\r\n                typeCount = (1e6 * typeCount) / STATE_POPULATIONS[state.state];\r\n              if (state.state !== 'Total') {\r\n                statistic[dtype].total += typeCount;\r\n                if (typeCount > statistic[dtype].max) {\r\n                  statistic[dtype].max = typeCount;\r\n                }\r\n              }\r\n              acc[state.state][dtype] = typeCount;\r\n            });\r\n            return acc;\r\n          }, {});\r\n        } else {\r\n          currentMapData = Object.keys(districts).reduce((acc1, state) => {\r\n            const districtWiseData = (districts[state] || {districtData: {}})\r\n              .districtData;\r\n            acc1[state] = Object.keys(districtWiseData).reduce(\r\n              (acc2, district) => {\r\n                acc2[district] = {};\r\n                dataTypes.forEach((dtype) => {\r\n                  const typeCount = parseInt(districtWiseData[district][dtype]);\r\n                  statistic[dtype].total += typeCount;\r\n                  if (typeCount > statistic[dtype].max) {\r\n                    statistic[dtype].max = typeCount;\r\n                  }\r\n                  acc2[district][dtype] = typeCount;\r\n                });\r\n                return acc2;\r\n              },\r\n              {}\r\n            );\r\n            return acc1;\r\n          }, {});\r\n        }\r\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const districtWiseData = (\r\n          districts[currentMap.name] || {districtData: {}}\r\n        ).districtData;\r\n        currentMapData[currentMap.name] = Object.keys(districtWiseData).reduce(\r\n          (acc, district) => {\r\n            acc[district] = {};\r\n            dataTypes.forEach((dtype) => {\r\n              const typeCount = parseInt(districtWiseData[district][dtype]);\r\n              statistic[dtype].total += typeCount;\r\n              if (typeCount > statistic[dtype].max) {\r\n                statistic[dtype].max = typeCount;\r\n              }\r\n              acc[district][dtype] = typeCount;\r\n            });\r\n            return acc;\r\n          },\r\n          {}\r\n        );\r\n        currentMapData[currentMap.name].Total = {};\r\n        const stateData = states.find(\r\n          (state) => currentMap.name === state.state\r\n        );\r\n        dataTypes.forEach((dtype) => {\r\n          currentMapData[currentMap.name].Total[dtype] =\r\n            parseInt(stateData[dtype !== 'deceased' ? dtype : 'deaths']) || 0;\r\n        });\r\n      }\r\n    }\r\n    return [statistic, currentMapData];\r\n  }, [currentMap, currentMapMeta.mapType, districts, zones, states]);\r\n\r\n  const [hoveredRegion, panelRegion] = useMemo(() => {\r\n    if (!regionHighlighted.district) {\r\n      const state = getRegionFromState(\r\n        states.find((state) => regionHighlighted.state === state.state)\r\n      );\r\n      return [state, state];\r\n    } else {\r\n      const stateDistrictObj = districts[regionHighlighted.state] || {\r\n        districtData: {},\r\n      };\r\n      const districtData = stateDistrictObj.districtData[\r\n        regionHighlighted.district\r\n      ] || {\r\n        confirmed: 0,\r\n        active: 0,\r\n        recovered: 0,\r\n        deaths: 0,\r\n      };\r\n      const district = getRegionFromDistrict(\r\n        districtData,\r\n        regionHighlighted.district\r\n      );\r\n      let state = getRegionFromState(\r\n        states.find((state) => state.state === regionHighlighted.state)\r\n      );\r\n      district.district = regionHighlighted.district;\r\n      district.state = state.state;\r\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n        state = states.find((state) => state.state === 'Total');\r\n      return [district, state];\r\n    }\r\n  }, [\r\n    states,\r\n    districts,\r\n    currentMapMeta.mapType,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (regionHighlighted.district) {\r\n      if (\r\n        currentMap.name !== regionHighlighted.state &&\r\n        !(\r\n          currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n          currentMap.view === MAP_VIEWS.DISTRICTS\r\n        )\r\n      ) {\r\n        const state = regionHighlighted.state;\r\n        const newMapMeta = MAP_META[state];\r\n        if (!newMapMeta) {\r\n          return;\r\n        }\r\n        setCurrentMap({\r\n          name: state,\r\n          view: MAP_VIEWS.DISTRICTS,\r\n          stat:\r\n            currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n              ? MAP_STATISTICS.TOTAL\r\n              : currentMap.stat,\r\n        });\r\n      }\r\n    } else if (isCountryLoaded && currentMapMeta.mapType === MAP_TYPES.STATE) {\r\n      setCurrentMap({\r\n        name: 'India',\r\n        view:\r\n          currentMap.stat === MAP_STATISTICS.ZONE\r\n            ? MAP_VIEWS.DISTRICTS\r\n            : MAP_VIEWS.STATES,\r\n        stat: currentMap.stat,\r\n      });\r\n    }\r\n  }, [\r\n    isCountryLoaded,\r\n    regionHighlighted.state,\r\n    regionHighlighted.district,\r\n    currentMap,\r\n    currentMapMeta.mapType,\r\n  ]);\r\n\r\n  const switchMapToState = useCallback(\r\n    (state) => {\r\n      const newMapMeta = MAP_META[state];\r\n      if (!newMapMeta) {\r\n        return;\r\n      }\r\n      if (newMapMeta.mapType === MAP_TYPES.STATE) {\r\n        const {districtData} = districts[state] || {\r\n          districtData: {},\r\n        };\r\n        const topDistrict = Object.keys(districtData)\r\n          .filter((state) => state !== 'Unknown')\r\n          .sort((a, b) => {\r\n            return districtData[b].confirmed - districtData[a].confirmed;\r\n          })[0];\r\n        ReactDOM.unstable_batchedUpdates(() => {\r\n          setRegionHighlighted({\r\n            district: topDistrict,\r\n            state: state,\r\n          });\r\n          setCurrentMap({\r\n            name: state,\r\n            view: MAP_VIEWS.DISTRICTS,\r\n            stat:\r\n              currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n                ? MAP_STATISTICS.TOTAL\r\n                : currentMap.stat,\r\n          });\r\n        });\r\n      } else {\r\n        ReactDOM.unstable_batchedUpdates(() => {\r\n          setCurrentMap({\r\n            name: 'India',\r\n            view:\r\n              currentMap.stat === MAP_STATISTICS.ZONE\r\n                ? MAP_VIEWS.DISTRICTS\r\n                : MAP_VIEWS.STATES,\r\n            stat: currentMap.stat,\r\n          });\r\n          setRegionHighlighted({\r\n            state: 'Total',\r\n          });\r\n        });\r\n      }\r\n    },\r\n    [currentMap.stat, districts, setRegionHighlighted]\r\n  );\r\n\r\n  const testObj = stateTestData[panelRegion.state];\r\n\r\n  let hoveredRegionCount;\r\n  let hoveredRegionZone;\r\n  if (currentMap.stat !== MAP_STATISTICS.ZONE) {\r\n    const data =\r\n      hoveredRegion.district && currentMapData[hoveredRegion.state]\r\n        ? currentMapData[hoveredRegion.state][hoveredRegion.district]\r\n        : hoveredRegion.state !== currentMap.name\r\n        ? currentMapData[hoveredRegion.state]\r\n        : currentMapData[hoveredRegion.state].Total;\r\n    hoveredRegionCount = data\r\n      ? currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n        ? Number(parseFloat(data[mapOption]).toFixed(2))\r\n        : data[mapOption]\r\n      : 0;\r\n  } else {\r\n    hoveredRegionZone =\r\n      zones[hoveredRegion.state] &&\r\n      zones[hoveredRegion.state][hoveredRegion.district]\r\n        ? zones[hoveredRegion.state][hoveredRegion.district].zone\r\n        : '';\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`MapExplorer fadeInUp ${\r\n        anchor === 'mapexplorer' ? 'stickied' : ''\r\n      }`}\r\n      style={{\r\n        animationDelay: '1.5s',\r\n        display: anchor === 'timeseries' ? 'none' : '',\r\n      }}\r\n    >\r\n      {window.innerWidth > 769 && (\r\n        <div\r\n          className={`anchor ${anchor === 'mapexplorer' ? 'stickied' : ''}`}\r\n          onClick={() => {\r\n            setAnchor(anchor === 'mapexplorer' ? null : 'mapexplorer');\r\n          }}\r\n        >\r\n          <Icon.Anchor />\r\n        </div>\r\n      )}\r\n      <div className=\"header\">\r\n        <h1>\r\n          {t(currentMap.name)} {t('Map')}\r\n        </h1>\r\n        <h6>\r\n          {t('{{action}} over a {{mapType}} for more details', {\r\n            action: t(window.innerWidth <= 769 ? 'Tap' : 'Hover'),\r\n            mapType: t(\r\n              currentMapMeta.mapType === MAP_TYPES.COUNTRY\r\n                ? 'state/UT'\r\n                : 'District'\r\n            ),\r\n          })}\r\n        </h6>\r\n      </div>\r\n\r\n      <div className=\"map-stats\">\r\n        <div\r\n          className={`stats fadeInUp ${\r\n            mapOption === 'confirmed' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2s'}}\r\n          onClick={() => setMapOption('confirmed')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Cnfmd') : t('Confirmed')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.confirmed)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltaconfirmed)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-blue fadeInUp ${\r\n            mapOption === 'active' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.1s'}}\r\n          onClick={() => setMapOption('active')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Actv') : t('Active')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.active)}</h1>\r\n            <h6>{` `}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-green fadeInUp ${\r\n            mapOption === 'recovered' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.2s'}}\r\n          onClick={() => setMapOption('recovered')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Rcvrd') : t('Recovered')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.recovered)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltarecovered)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`stats is-gray fadeInUp ${\r\n            mapOption === 'deceased' ? 'focused' : ''\r\n          }`}\r\n          style={{animationDelay: '2.3s'}}\r\n          onClick={() => setMapOption('deceased')}\r\n        >\r\n          <h5>{window.innerWidth <= 769 ? t('Dcsd') : t('Deceased')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(panelRegion.deaths)}</h1>\r\n            <h6>{`+${formatNumber(panelRegion.deltadeaths)}`}</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className=\"stats is-purple tested fadeInUp\"\r\n          style={{animationDelay: '2.4s'}}\r\n        >\r\n          <h5>{t('Tested')}</h5>\r\n          <div className=\"stats-bottom\">\r\n            <h1>{formatNumber(testObj?.totaltested)}</h1>\r\n          </div>\r\n          <h6 className=\"timestamp\">\r\n            {!isNaN(parse(testObj?.updatedon, 'dd/MM/yyyy', new Date()))\r\n              ? t('As of {{date}}', {\r\n                  date: formatDayMonth(testObj?.updatedon),\r\n                })\r\n              : ''}\r\n          </h6>\r\n          {testObj?.totaltested?.length > 1 && (\r\n            <a href={testObj.source} target=\"_noblank\">\r\n              <Icon.Link />\r\n            </a>\r\n          )}\r\n          {panelRegion.state === 'Total' ? testedToolTip : ''}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"meta fadeInUp\" style={{animationDelay: '2.4s'}}>\r\n        <h2\r\n          className={`${\r\n            currentMap.stat !== MAP_STATISTICS.ZONE\r\n              ? mapOption !== 'confirmed'\r\n                ? mapOption\r\n                : ''\r\n              : hoveredRegionZone\r\n          }`}\r\n        >\r\n          {hoveredRegion.district\r\n            ? t(hoveredRegion.district) +\r\n              (hoveredRegion.district === 'Unknown'\r\n                ? ` (${t(hoveredRegion.state)})`\r\n                : '')\r\n            : t(hoveredRegion.state)}\r\n        </h2>\r\n\r\n        {currentMapMeta.mapType !== MAP_TYPES.STATE &&\r\n          panelRegion.lastupdatedtime && (\r\n            <div className=\"last-update\">\r\n              <h6>{t('Last updated')}</h6>\r\n              <h3>\r\n                {isNaN(Date.parse(formatDate(panelRegion.lastupdatedtime)))\r\n                  ? ''\r\n                  : formatLastUpdated(panelRegion.lastupdatedtime) +\r\n                    ' ' +\r\n                    t('ago')}\r\n              </h3>\r\n            </div>\r\n          )}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\r\n          <Link to={`state/${STATE_CODES_REVERSE[panelRegion.state]}`}>\r\n            <div className=\"button state-page-button\">\r\n              <abbr>{t('Visit state page')}</abbr>\r\n              <Icon.ArrowRightCircle />\r\n            </div>\r\n          </Link>\r\n        ) : null}\r\n\r\n        {currentMap.stat !== MAP_STATISTICS.ZONE &&\r\n        (currentMapMeta.mapType === MAP_TYPES.STATE ||\r\n          (currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\r\n            currentMap.stat !== MAP_STATISTICS.TOTAL)) &&\r\n        (currentMap.stat !== MAP_STATISTICS.HOTSPOTS ||\r\n          hoveredRegion?.district) ? (\r\n          <h1\r\n            className={`district ${mapOption !== 'confirmed' ? mapOption : ''}`}\r\n          >\r\n            {hoveredRegionCount}\r\n            <br />\r\n            <span>\r\n              {t(mapOption)}{' '}\r\n              {currentMap.stat === MAP_STATISTICS.PER_MILLION\r\n                ? ` ${t('per million')}`\r\n                : ''}\r\n            </span>\r\n          </h1>\r\n        ) : null}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\r\n          <div\r\n            className=\"button back-button\"\r\n            onClick={() => switchMapToState('India')}\r\n          >\r\n            {t('Back')}\r\n          </div>\r\n        ) : null}\r\n\r\n        {currentMapMeta.mapType === MAP_TYPES.STATE &&\r\n        currentMapData.Unknown &&\r\n        currentMapData.Unknown[mapOption] > 0 ? (\r\n          <h4 className=\"unknown\">\r\n            {t('Districts unknown for')} {currentMapData.Unknown[mapOption]}{' '}\r\n            {t('people')}\r\n          </h4>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div>\r\n        {mapOption && (\r\n          <ChoroplethMap\r\n            statistic={statistic}\r\n            currentMap={currentMap}\r\n            mapData={currentMapData}\r\n            regionHighlighted={regionHighlighted}\r\n            setRegionHighlighted={setRegionHighlighted}\r\n            changeMap={switchMapToState}\r\n            mapOption={mapOption}\r\n            isCountryLoaded={isCountryLoaded}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"tabs-map\">\r\n        <div\r\n          className={`tab ${\r\n            currentMap.stat === MAP_STATISTICS.TOTAL ? 'focused' : ''\r\n          }`}\r\n          onClick={() => {\r\n            setCurrentMap({\r\n              name: currentMap.name,\r\n              view:\r\n                currentMapMeta.mapType === MAP_TYPES.COUNTRY\r\n                  ? MAP_VIEWS.STATES\r\n                  : MAP_VIEWS.DISTRICTS,\r\n              stat: MAP_STATISTICS.TOTAL,\r\n            });\r\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n              setRegionHighlighted({\r\n                state: regionHighlighted.state,\r\n              });\r\n          }}\r\n        >\r\n          <h4>{t('Total Cases')}</h4>\r\n        </div>\r\n        {isCountryLoaded && (\r\n          <div\r\n            className={`tab ${\r\n              currentMap.stat === MAP_STATISTICS.PER_MILLION ? 'focused' : ''\r\n            }`}\r\n            onClick={() => {\r\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\r\n              setCurrentMap({\r\n                name: currentMap.name,\r\n                view: MAP_VIEWS.STATES,\r\n                stat: MAP_STATISTICS.PER_MILLION,\r\n              });\r\n              setRegionHighlighted({\r\n                state: regionHighlighted.state,\r\n              });\r\n            }}\r\n          >\r\n            <h4>\r\n              {t('Cases per million')}\r\n              <sup>&dagger;</sup>\r\n            </h4>\r\n          </div>\r\n        )}\r\n        {isCountryLoaded && (\r\n          <div\r\n            className={`tab ${\r\n              currentMap.stat === MAP_STATISTICS.HOTSPOTS ? 'focused' : ''\r\n            }`}\r\n            onClick={() => {\r\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\r\n              setCurrentMap({\r\n                name: currentMap.name,\r\n                view: MAP_VIEWS.DISTRICTS,\r\n                stat: MAP_STATISTICS.HOTSPOTS,\r\n              });\r\n            }}\r\n          >\r\n            <h4>{t('Hotspots')}</h4>\r\n          </div>\r\n        )}\r\n        {/* <div\r\n          className={`tab ${\r\n            currentMap.stat === MAP_STATISTICS.ZONE ? 'focused' : ''\r\n          }`}\r\n          onClick={() => {\r\n            setCurrentMap({\r\n              name: currentMap.name,\r\n              view: MAP_VIEWS.DISTRICTS,\r\n              stat: MAP_STATISTICS.ZONE,\r\n            });\r\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\r\n              setRegionHighlighted({\r\n                state: 'Total',\r\n              });\r\n          }}\r\n        >\r\n          <h4>{t('Zones')}</h4>\r\n        </div>*/}\r\n      </div>\r\n\r\n      <h6 className=\"footnote table-fineprint\">\r\n        &dagger; {t('Based on 2019 population projection by NCP') + ' ('}\r\n        <a\r\n          href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\r\n          target=\"_noblank\"\r\n          style={{color: '#6c757d'}}\r\n        >\r\n          {t('source')}\r\n        </a>\r\n        )\r\n      </h6>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(MapExplorer, isEqual);\r\n","import {testedToolTip} from './tooltips';\r\n\r\nimport {\r\n  sliceTimeseriesFromEnd,\r\n  formatNumber,\r\n  formatTimeseriesDate,\r\n  formatTimeseriesTickX,\r\n} from '../utils/commonfunctions';\r\nimport {useResizeObserver} from '../utils/hooks';\r\n\r\nimport * as d3 from 'd3';\r\nimport {addDays, subDays} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!currProps.isIntersecting) return true;\r\n  if (!prevProps.isIntersecting) return false;\r\n  if (!equal(currProps.chartType, prevProps.chartType)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.mode, prevProps.mode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.logMode, prevProps.logMode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.stateCode, prevProps.stateCode)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction TimeSeries({timeseriesProp, chartType, mode, logMode, stateCode}) {\r\n  const {t} = useTranslation();\r\n  const [lastDaysCount, setLastDaysCount] = useState(\r\n    window.innerWidth > 512 ? Infinity : 30\r\n  );\r\n  const [timeseries, setTimeseries] = useState({});\r\n  const [datapoint, setDatapoint] = useState({});\r\n  const [index, setIndex] = useState(0);\r\n  const [moving, setMoving] = useState(false);\r\n\r\n  const svgRef1 = useRef();\r\n  const svgRef2 = useRef();\r\n  const svgRef3 = useRef();\r\n  const svgRef4 = useRef();\r\n  const svgRef5 = useRef();\r\n\r\n  const wrapperRef = useRef();\r\n  const dimensions = useResizeObserver(wrapperRef);\r\n\r\n  const transformTimeSeries = useCallback(\r\n    (timeseries) => {\r\n      if (timeseries.length > 1) {\r\n        const slicedTimeseries = sliceTimeseriesFromEnd(\r\n          timeseries,\r\n          lastDaysCount\r\n        );\r\n        setIndex(slicedTimeseries.length - 1);\r\n        setTimeseries(slicedTimeseries);\r\n      }\r\n    },\r\n    [lastDaysCount]\r\n  );\r\n\r\n  useEffect(() => {\r\n    transformTimeSeries(timeseriesProp);\r\n  }, [lastDaysCount, timeseriesProp, transformTimeSeries]);\r\n\r\n  const graphData = useCallback(\r\n    (timeseries) => {\r\n      const {width, height} =\r\n        dimensions || wrapperRef.current.getBoundingClientRect();\r\n\r\n      // Margins\r\n      const margin = {top: 15, right: 35, bottom: 25, left: 25};\r\n      const chartRight = width - margin.right;\r\n      const chartBottom = height - margin.bottom;\r\n\r\n      const T = timeseries.length;\r\n      const yBufferTop = 1.2;\r\n      const yBufferBottom = 1.1;\r\n\r\n      setDatapoint(timeseries[T - 1]);\r\n      setIndex(T - 1);\r\n\r\n      const svg1 = d3.select(svgRef1.current);\r\n      const svg2 = d3.select(svgRef2.current);\r\n      const svg3 = d3.select(svgRef3.current);\r\n      const svg4 = d3.select(svgRef4.current);\r\n      const svg5 = d3.select(svgRef5.current);\r\n\r\n      const dateMin = subDays(timeseries[0].date, 1);\r\n      const dateMax = addDays(timeseries[T - 1].date, 1);\r\n\r\n      const xScale = d3\r\n        .scaleTime()\r\n        .clamp(true)\r\n        .domain([dateMin, dateMax])\r\n        .range([margin.left, chartRight]);\r\n\r\n      // Number of x-axis ticks\r\n      const numTicksX = width < 480 ? 4 : 7;\r\n\r\n      const xAxis = (g) =>\r\n        g.attr('class', 'x-axis').call(\r\n          d3\r\n            .axisBottom(xScale)\r\n            .ticks(numTicksX)\r\n            .tickFormat((tick) => {\r\n              return formatTimeseriesTickX(tick);\r\n            })\r\n        );\r\n\r\n      const xAxis2 = (g, yScale) => {\r\n        g.attr('class', 'x-axis2')\r\n          .call(d3.axisBottom(xScale).tickValues([]).tickSize(0))\r\n          .select('.domain')\r\n          .style('transform', `translateY(${yScale(0)}px)`);\r\n\r\n        if (yScale(0) !== chartBottom) g.select('.domain').attr('opacity', 0.4);\r\n        else g.select('.domain').attr('opacity', 0);\r\n      };\r\n\r\n      const yAxis = (g, yScale) =>\r\n        g\r\n          .attr('class', 'y-axis')\r\n          .call(d3.axisRight(yScale).ticks(4, '0~s').tickPadding(4));\r\n\r\n      // Arrays of objects\r\n      const plotTotal = chartType === 1;\r\n      const dataTypesTotal = [\r\n        'totalconfirmed',\r\n        'totalactive',\r\n        'totalrecovered',\r\n        'totaldeceased',\r\n        'totaltested',\r\n      ];\r\n      const dataTypesDaily = [\r\n        'dailyconfirmed',\r\n        'dailyactive',\r\n        'dailyrecovered',\r\n        'dailydeceased',\r\n        'dailytested',\r\n      ];\r\n\r\n      const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d', '#201aa2'];\r\n\r\n      const svgArray = [svg1, svg2, svg3, svg4, svg5];\r\n\r\n      let yScales;\r\n      if (plotTotal) {\r\n        const uniformScaleMin = d3.min(timeseries, (d) =>\r\n          Math.min(d.totalactive, d.totalrecovered, d.totaldeceased)\r\n        );\r\n        const uniformScaleMax = d3.max(timeseries, (d) => d.totalconfirmed);\r\n        const yScaleUniformLinear = d3\r\n          .scaleLinear()\r\n          .clamp(true)\r\n          .domain([uniformScaleMin, Math.max(1, yBufferTop * uniformScaleMax)])\r\n          .nice(4)\r\n          .range([chartBottom, margin.top]);\r\n\r\n        const yScaleUniformLog = d3\r\n          .scaleLog()\r\n          .clamp(true)\r\n          .domain([\r\n            Math.max(1, uniformScaleMin),\r\n            Math.max(10, yBufferTop * uniformScaleMax),\r\n          ])\r\n          .nice(4)\r\n          .range([chartBottom, margin.top]);\r\n\r\n        yScales = dataTypesTotal.map((type) => {\r\n          const yScaleLinear = d3\r\n            .scaleLinear()\r\n            .clamp(true)\r\n            .domain([\r\n              d3.min(timeseries, (d) => d[type]),\r\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice(4)\r\n            .range([chartBottom, margin.top]);\r\n          const yScaleLog = d3\r\n            .scaleLog()\r\n            .clamp(true)\r\n            .domain([\r\n              Math.max(\r\n                1,\r\n                d3.min(timeseries, (d) => d[type])\r\n              ),\r\n              Math.max(10, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice(4)\r\n            .range([chartBottom, margin.top]);\r\n          if (mode && type !== 'totaltested')\r\n            return logMode ? yScaleUniformLog : yScaleUniformLinear;\r\n          else return logMode ? yScaleLog : yScaleLinear;\r\n        });\r\n      } else {\r\n        const yScaleDailyUniform = d3\r\n          .scaleLinear()\r\n          .clamp(true)\r\n          .domain([\r\n            yBufferBottom *\r\n              Math.min(\r\n                0,\r\n                d3.min(timeseries, (d) => d.dailyactive)\r\n              ),\r\n            Math.max(\r\n              1,\r\n              yBufferTop *\r\n                d3.max(timeseries, (d) =>\r\n                  Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\r\n                )\r\n            ),\r\n          ])\r\n          .nice(4)\r\n          .range([chartBottom, margin.top]);\r\n\r\n        yScales = dataTypesDaily.map((type) => {\r\n          if (mode && type !== 'dailytested') return yScaleDailyUniform;\r\n          const yScaleLinear = d3\r\n            .scaleLinear()\r\n            .clamp(true)\r\n            .domain([\r\n              yBufferBottom *\r\n                Math.min(\r\n                  0,\r\n                  d3.min(timeseries, (d) => d[type])\r\n                ),\r\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\r\n            ])\r\n            .nice(4)\r\n            .range([chartBottom, margin.top]);\r\n          return yScaleLinear;\r\n        });\r\n      }\r\n\r\n      /* Focus dots */\r\n      const focus = svgArray.map((svg, i) => {\r\n        return svg\r\n          .selectAll('.focus')\r\n          .data([timeseries[T - 1]], (d) => d.date)\r\n          .join((enter) =>\r\n            enter.append('circle').attr('cx', (d) => xScale(d.date))\r\n          )\r\n          .attr('class', 'focus')\r\n          .attr('fill', colors[i])\r\n          .attr('stroke', colors[i])\r\n          .attr('r', 4);\r\n      });\r\n\r\n      function mousemove() {\r\n        const xm = d3.mouse(this)[0];\r\n        const date = xScale.invert(xm);\r\n        const bisectDate = d3.bisector((d) => d.date).left;\r\n        let i = bisectDate(timeseries, date, 1);\r\n        if (0 <= i && i < T) {\r\n          if (date - timeseries[i - 1].date < timeseries[i].date - date) --i;\r\n          setDatapoint(timeseries[i]);\r\n          setIndex(i);\r\n          setMoving(true);\r\n          const d = timeseries[i];\r\n          focus.forEach((f, j) => {\r\n            const yScale = yScales[j];\r\n            const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\r\n            if (!isNaN(d[type]))\r\n              f.attr('cx', xScale(d.date))\r\n                .attr('cy', yScale(d[type]))\r\n                .attr('opacity', 1);\r\n            else f.attr('opacity', 0);\r\n          });\r\n        }\r\n      }\r\n\r\n      function mouseout() {\r\n        setDatapoint(timeseries[T - 1]);\r\n        setIndex(T - 1);\r\n        setMoving(false);\r\n        focus.forEach((f, j) => {\r\n          const yScale = yScales[j];\r\n          const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\r\n          if (!isNaN(timeseries[T - 1][type]))\r\n            f.attr('cx', xScale(timeseries[T - 1].date))\r\n              .attr('cy', yScale(timeseries[T - 1][type]))\r\n              .attr('opacity', 1);\r\n          else f.attr('opacity', 0);\r\n        });\r\n      }\r\n\r\n      /* Begin drawing charts */\r\n      svgArray.forEach((svg, i) => {\r\n        // Transition interval\r\n        const t = svg.transition().duration(500);\r\n        const typeTotal = dataTypesTotal[i];\r\n        const typeDaily = dataTypesDaily[i];\r\n        const type = plotTotal ? typeTotal : typeDaily;\r\n\r\n        const filteredTimeseries = timeseries.filter((d) => !isNaN(d[type]));\r\n        const color = colors[i];\r\n        const yScale = yScales[i];\r\n\r\n        /* X axis */\r\n        svg\r\n          .select('.x-axis')\r\n          .style('transform', `translateY(${chartBottom}px)`)\r\n          .transition(t)\r\n          .call(xAxis);\r\n        svg.select('.x-axis2').transition(t).call(xAxis2, yScale);\r\n        /* Y axis */\r\n        svg\r\n          .select('.y-axis')\r\n          .style('transform', `translateX(${chartRight}px)`)\r\n          .transition(t)\r\n          .call(yAxis, yScale);\r\n\r\n        /* Path dots */\r\n        svg\r\n          .selectAll('.dot')\r\n          .data(filteredTimeseries, (d) => d.date)\r\n          .join((enter) =>\r\n            enter\r\n              .append('circle')\r\n              .attr('cy', chartBottom)\r\n              .attr('cx', (d) => xScale(d.date))\r\n          )\r\n          .attr('class', 'dot')\r\n          .attr('fill', color)\r\n          .attr('stroke', color)\r\n          .attr('r', 2)\r\n          .transition(t)\r\n          .attr('cx', (d) => xScale(d.date))\r\n          .attr('cy', (d) => yScale(d[type]));\r\n\r\n        if (!isNaN(timeseries[T - 1][type]))\r\n          focus[i]\r\n            .transition(t)\r\n            .attr('cx', (d) => xScale(d.date))\r\n            .attr('cy', (d) => yScale(d[type]))\r\n            .attr('opacity', 1);\r\n        else focus[i].transition(t).attr('opacity', 0);\r\n\r\n        if (plotTotal) {\r\n          /* TOTAL TRENDS */\r\n          svg.selectAll('.stem').remove();\r\n          const path = svg\r\n            .selectAll('.trend')\r\n            .data([[...filteredTimeseries].reverse()])\r\n            .join('path')\r\n            .attr('class', 'trend')\r\n            .attr('fill', 'none')\r\n            .attr('stroke', color + '99')\r\n            .attr('stroke-width', 4);\r\n          // HACK\r\n          // Path interpolation is non-trivial. Ideally, a custom path tween\r\n          // function should be defined which takes care that old path dots\r\n          // transition synchronously along with the path transition. This hack\r\n          // simulates that behaviour.\r\n          if (path.attr('d')) {\r\n            const n = path.node().getTotalLength();\r\n            const p = path.node().getPointAtLength(n);\r\n            // Append points at end of path for better interpolation\r\n            path.attr(\r\n              'd',\r\n              () => path.attr('d') + `L${p.x},${p.y}`.repeat(3 * T)\r\n            );\r\n          }\r\n          path\r\n            .transition(t)\r\n            .attr('opacity', plotTotal ? 1 : 0)\r\n            .attr(\r\n              'd',\r\n              d3\r\n                .line()\r\n                .x((d) => xScale(d.date))\r\n                .y((d) => yScale(d[typeTotal]))\r\n                .curve(d3.curveMonotoneX)\r\n            );\r\n        } else {\r\n          /* DAILY TRENDS */\r\n          svg.selectAll('.trend').remove();\r\n          svg\r\n            .selectAll('.stem')\r\n            .data(filteredTimeseries, (d) => d.date)\r\n            .join((enter) =>\r\n              enter\r\n                .append('line')\r\n                .attr('x1', (d) => xScale(d.date))\r\n                .attr('y1', chartBottom)\r\n                .attr('x2', (d) => xScale(d.date))\r\n                .attr('y2', chartBottom)\r\n            )\r\n            .attr('class', 'stem')\r\n            .style('stroke', color + '99')\r\n            .style('stroke-width', 4)\r\n            .transition(t)\r\n            .attr('x1', (d) => xScale(d.date))\r\n            .attr('y1', yScale(0))\r\n            .attr('x2', (d) => xScale(d.date))\r\n            .attr('y2', (d) => yScale(d[typeDaily]));\r\n        }\r\n\r\n        svg\r\n          .on('mousemove', mousemove)\r\n          .on('touchmove', mousemove)\r\n          .on('mouseout', mouseout)\r\n          .on('touchend', mouseout);\r\n      });\r\n    },\r\n    [chartType, dimensions, logMode, mode]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (timeseries.length > 1) {\r\n      graphData(timeseries);\r\n    }\r\n  }, [timeseries, graphData]);\r\n\r\n  const dateStr = datapoint.date ? formatTimeseriesDate(datapoint.date) : '';\r\n\r\n  const chartKey1 = chartType === 1 ? 'totalconfirmed' : 'dailyconfirmed';\r\n  const chartKey2 = chartType === 1 ? 'totalactive' : 'dailyactive';\r\n  const chartKey3 = chartType === 1 ? 'totalrecovered' : 'dailyrecovered';\r\n  const chartKey4 = chartType === 1 ? 'totaldeceased' : 'dailydeceased';\r\n  const chartKey5 = chartType === 1 ? 'totaltested' : 'dailytested';\r\n\r\n  // Function for calculate increased/decreased count for each type of data\r\n  const currentStatusCount = (chartType) => {\r\n    if (timeseries.length <= 0 || index <= 0 || index >= timeseries.length)\r\n      return '';\r\n    const currentDiff =\r\n      timeseries[index][chartType] - timeseries[index - 1][chartType];\r\n    const formatedDiff = formatNumber(currentDiff);\r\n    return currentDiff >= 0 ? `+${formatedDiff}` : formatedDiff;\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"TimeSeries fadeInUp\" style={{animationDelay: '2.7s'}}>\r\n        <div className=\"svg-parent\" ref={wrapperRef}>\r\n          <div className=\"stats\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Confirmed')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey1])}</h2>\r\n              <h6>{currentStatusCount(chartKey1)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef1} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-blue\">\r\n          <div className=\"stats is-blue\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Active')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey2])}</h2>\r\n              <h6>{currentStatusCount(chartKey2)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef2} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-green\">\r\n          <div className=\"stats is-green\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Recovered')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey3])}</h2>\r\n              <h6>{currentStatusCount(chartKey3)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef3} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-gray\">\r\n          <div className=\"stats is-gray\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Deceased')}</h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey4])}</h2>\r\n              <h6>{currentStatusCount(chartKey4)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef4} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div className=\"svg-parent is-purple\">\r\n          <div className=\"stats is-purple\">\r\n            <h5 className={`${!moving ? 'title' : ''}`}>\r\n              {t('Tested')} {stateCode === 'TT' ? testedToolTip : ''}\r\n            </h5>\r\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\r\n            <div className=\"stats-bottom\">\r\n              <h2>{formatNumber(datapoint[chartKey5])}</h2>\r\n              <h6>{currentStatusCount(chartKey5)}</h6>\r\n            </div>\r\n          </div>\r\n          <svg ref={svgRef5} preserveAspectRatio=\"xMidYMid meet\">\r\n            <g className=\"x-axis\" />\r\n            <g className=\"x-axis2\" />\r\n            <g className=\"y-axis\" />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pills\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(Infinity)}\r\n          className={lastDaysCount === Infinity ? 'selected' : ''}\r\n        >\r\n          {t('Beginning')}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(30)}\r\n          className={lastDaysCount === 30 ? 'selected' : ''}\r\n          aria-label=\"1 month\"\r\n        >\r\n          {`1 ${t('Month')}`}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setLastDaysCount(14)}\r\n          className={lastDaysCount === 14 ? 'selected' : ''}\r\n          aria-label=\"14 days\"\r\n        >\r\n          {`2 ${t('Weeks')}`}\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default React.memo(TimeSeries, isEqual);\r\n","import TimeSeries from './timeseries';\r\n\r\nimport 'intersection-observer';\r\nimport Observer from '@researchgate/react-intersection-observer';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useState} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useLocalStorage} from 'react-use';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(currProps.activeStateCode, prevProps.activeStateCode)) {\r\n    return false;\r\n  }\r\n  if (!equal(currProps.anchor, prevProps.anchor)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nfunction TimeSeriesExplorer({\r\n  timeseries,\r\n  activeStateCode,\r\n  onHighlightState,\r\n  states,\r\n  anchor,\r\n  setAnchor,\r\n}) {\r\n  const [chartType, setChartType] = useLocalStorage('timeseriesChartType', 1);\r\n  const [isTimeseriesIntersecting, setIsTimeseriesIntersecting] = useState(\r\n    false\r\n  );\r\n\r\n  const [timeseriesMode, setTimeseriesMode] = useLocalStorage(\r\n    'timeseriesMode',\r\n    true\r\n  );\r\n  const [timeseriesLogMode, setTimeseriesLogMode] = useLocalStorage(\r\n    'timeseriesLogMode',\r\n    false\r\n  );\r\n  const {t} = useTranslation();\r\n\r\n  const options = {\r\n    rootMargin: '0px 0px 0px 0px',\r\n  };\r\n\r\n  return (\r\n    <Observer\r\n      options={options}\r\n      onChange={({isIntersecting}) =>\r\n        setIsTimeseriesIntersecting(isIntersecting)\r\n      }\r\n    >\r\n      <div\r\n        className={`TimeSeriesExplorer ${\r\n          anchor === 'timeseries' ? 'stickied' : ''\r\n        }`}\r\n        style={{display: anchor === 'mapexplorer' ? 'none' : ''}}\r\n      >\r\n        <div\r\n          className=\"timeseries-header fadeInUp\"\r\n          style={{animationDelay: '2.5s'}}\r\n        >\r\n          {window.innerWidth > 769 && anchor !== undefined && (\r\n            <div\r\n              className={`anchor ${anchor === 'timeseries' ? 'stickied' : ''}`}\r\n              onClick={() => {\r\n                setAnchor(anchor === 'timeseries' ? null : 'timeseries');\r\n              }}\r\n            >\r\n              <Icon.Anchor />\r\n            </div>\r\n          )}\r\n\r\n          <h1>{t('Spread Trends')}</h1>\r\n          <div className=\"tabs\">\r\n            <div\r\n              className={`tab ${chartType === 1 ? 'focused' : ''}`}\r\n              onClick={() => {\r\n                setChartType(1);\r\n              }}\r\n            >\r\n              <h4>{t('Cumulative')}</h4>\r\n            </div>\r\n            <div\r\n              className={`tab ${chartType === 2 ? 'focused' : ''}`}\r\n              onClick={() => {\r\n                setChartType(2);\r\n              }}\r\n            >\r\n              <h4>{t('Daily')}</h4>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"scale-modes\">\r\n            <label className=\"main\">{t('Scale Modes')}</label>\r\n            <div className=\"timeseries-mode\">\r\n              <label htmlFor=\"timeseries-mode\">{t('Uniform')}</label>\r\n              <input\r\n                id=\"timeseries-mode\"\r\n                type=\"checkbox\"\r\n                checked={timeseriesMode}\r\n                className=\"switch\"\r\n                aria-label={t('Checked by default to scale uniformly.')}\r\n                onChange={(event) => {\r\n                  setTimeseriesMode(!timeseriesMode);\r\n                }}\r\n              />\r\n            </div>\r\n            <div\r\n              className={`timeseries-logmode ${\r\n                chartType !== 1 ? 'disabled' : ''\r\n              }`}\r\n            >\r\n              <label htmlFor=\"timeseries-logmode\">{t('Logarithmic')}</label>\r\n              <input\r\n                id=\"timeseries-logmode\"\r\n                type=\"checkbox\"\r\n                checked={chartType === 1 && timeseriesLogMode}\r\n                className=\"switch\"\r\n                disabled={chartType !== 1}\r\n                onChange={(event) => {\r\n                  setTimeseriesLogMode(!timeseriesLogMode);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {states && (\r\n            <div className=\"trends-state-name\">\r\n              <select\r\n                value={activeStateCode}\r\n                onChange={({target}) => {\r\n                  const selectedState = target.selectedOptions[0].getAttribute(\r\n                    'statedata'\r\n                  );\r\n                  onHighlightState(JSON.parse(selectedState));\r\n                }}\r\n              >\r\n                {states.map((s) => {\r\n                  return (\r\n                    <option\r\n                      value={s.statecode}\r\n                      key={s.statecode}\r\n                      statedata={JSON.stringify(s)}\r\n                    >\r\n                      {s.statecode === 'TT' ? t('All States') : t(s.state)}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {timeseries && (\r\n          <TimeSeries\r\n            timeseriesProp={timeseries}\r\n            chartType={chartType}\r\n            mode={timeseriesMode}\r\n            logMode={timeseriesLogMode}\r\n            stateCode={activeStateCode}\r\n            isIntersecting={isTimeseriesIntersecting}\r\n          />\r\n        )}\r\n\r\n        <div className=\"alert\">\r\n          <Icon.AlertOctagon />\r\n          <div className=\"alert-right\">\r\n            {t('Tested chart is independent of uniform scaling')}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Observer>\r\n  );\r\n}\r\n\r\nexport default React.memo(TimeSeriesExplorer, isEqual);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Compass = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    points: \"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76\"\n  }));\n});\nCompass.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nCompass.displayName = 'Compass';\nexport default Compass;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _sx = _interopRequireDefault(require(\"./sx\"));\n\nvar _constants = require(\"./constants\");\n\nvar _theme = _interopRequireDefault(require(\"./theme\"));\n\nvar _Box = _interopRequireDefault(require(\"./Box\"));\n\nvar SELECTED_CLASS = 'selected';\n\nvar Wrapper = _styledComponents[\"default\"].li.withConfig({\n  displayName: \"Breadcrumb__Wrapper\",\n  componentId: \"sc-1hutxdl-0\"\n})([\"display:inline-block;white-space:nowrap;list-style:none;&::after{padding-right:0.5em;padding-left:0.5em;color:\", \";font-size:\", \";content:'/';}&:first-child{margin-left:0;}&:last-child{&::after{content:none;}}\"], (0, _constants.get)('colors.gray.2'), (0, _constants.get)('fontSizes.1'));\n\nvar BreadcrumbBase = function BreadcrumbBase(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      theme = _ref.theme,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"className\", \"children\", \"theme\"]);\n  var classes = (0, _classnames[\"default\"])(className, 'Breadcrumb');\n\n  var wrappedChildren = _react[\"default\"].Children.map(children, function (child) {\n    return /*#__PURE__*/_react[\"default\"].createElement(Wrapper, {\n      theme: theme\n    }, child);\n  });\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"nav\", (0, _extends2[\"default\"])({\n    className: classes,\n    \"aria-label\": \"breadcrumb\"\n  }, rest), /*#__PURE__*/_react[\"default\"].createElement(_Box[\"default\"], {\n    as: \"ol\",\n    my: 0,\n    pl: 0\n  }, wrappedChildren));\n};\n\nBreadcrumbBase.displayName = \"BreadcrumbBase\";\nvar Breadcrumb = (0, _styledComponents[\"default\"])(BreadcrumbBase).withConfig({\n  displayName: \"Breadcrumb\",\n  componentId: \"sc-1hutxdl-1\"\n})([\"display:flex;justify-content:space-between;\", \";\", \";\", \";\"], _constants.COMMON, _constants.FLEX, _sx[\"default\"]);\nBreadcrumb.Item = _styledComponents[\"default\"].a.attrs(function (props) {\n  return {\n    activeClassName: typeof props.to === 'string' ? 'selected' : '',\n    className: (0, _classnames[\"default\"])(props.selected && SELECTED_CLASS, props.className),\n    'aria-current': props.selected ? 'page' : null\n  };\n}).withConfig({\n  displayName: \"Breadcrumb__Item\",\n  componentId: \"sc-1hutxdl-2\"\n})([\"color:\", \";display:inline-block;font-size:\", \";text-decoration:none;&:hover{text-decoration:underline;}&.selected{color:\", \";pointer-events:none;}\", \" \", \";\"], (0, _constants.get)('colors.blue.5'), (0, _constants.get)('fontSizes.1'), (0, _constants.get)('colors.gray.7'), _constants.COMMON, _sx[\"default\"]);\nBreadcrumb.defaultProps = {\n  theme: _theme[\"default\"]\n};\nBreadcrumb.propTypes = (0, _objectSpread2[\"default\"])({}, _constants.COMMON.propTypes, {}, _sx[\"default\"].propTypes);\nBreadcrumb.displayName = 'Breadcrumb';\nBreadcrumb.Item.defaultProps = {\n  theme: _theme[\"default\"]\n};\nBreadcrumb.Item.propTypes = (0, _objectSpread2[\"default\"])({\n  as: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].elementType]),\n  href: _propTypes[\"default\"].string,\n  selected: _propTypes[\"default\"].bool\n}, _sx[\"default\"].propTypes, {}, _constants.COMMON.propTypes);\nBreadcrumb.Item.displayName = 'Breadcrumb.Item';\nvar _default = Breadcrumb;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _Button = _interopRequireDefault(require(\"./Button\"));\n\nvar _Details = _interopRequireDefault(require(\"./Details\"));\n\nvar _constants = require(\"./constants\");\n\nvar _DropdownStyles = _interopRequireDefault(require(\"./DropdownStyles\"));\n\nvar _theme = _interopRequireDefault(require(\"./theme\"));\n\nvar _sx = _interopRequireDefault(require(\"./sx\"));\n\nvar StyledDetails = (0, _styledComponents[\"default\"])(_Details[\"default\"]).withConfig({\n  displayName: \"Dropdown__StyledDetails\",\n  componentId: \"sc-3wysgd-0\"\n})([\"position:relative;display:inline-block;\"]);\n\nvar Dropdown = function Dropdown(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"children\", \"className\"]);\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledDetails, (0, _extends2[\"default\"])({\n    overlay: true,\n    className: className\n  }, rest), children);\n};\n\nDropdown.displayName = \"Dropdown\";\n\nDropdown.Button = function (_ref2) {\n  var children = _ref2.children,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref2, [\"children\"]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_Button[\"default\"], (0, _extends2[\"default\"])({\n    as: \"summary\",\n    \"aria-haspopup\": \"true\"\n  }, rest), children, /*#__PURE__*/_react[\"default\"].createElement(Dropdown.Caret, null));\n};\n\nDropdown.Caret = _styledComponents[\"default\"].div.withConfig({\n  displayName: \"Dropdown__Caret\",\n  componentId: \"sc-3wysgd-1\"\n})([\"border:4px solid transparent;margin-left:12px;border-top-color:currentcolor;border-bottom-width:0;content:'';display:inline-block;height:0;vertical-align:middle;width:0;\", \";\", \";\"], _constants.COMMON, _sx[\"default\"]);\nDropdown.Menu = _styledComponents[\"default\"].ul.withConfig({\n  displayName: \"Dropdown__Menu\",\n  componentId: \"sc-3wysgd-2\"\n})([\"background-clip:padding-box;background-color:\", \";border:1px solid rgba(27,31,35,0.15);border-radius:\", \";box-shadow:0 3px 12px rgba(27,31,35,0.15);left:0;list-style:none;margin-top:2px;padding:5px 0 5px 0 !important;position:absolute;top:100%;width:160px;z-index:100;&::before{position:absolute;display:inline-block;content:'';}&::after{position:absolute;display:inline-block;content:'';}&::before{border:8px solid transparent;border-bottom-color:\", \";}&::after{border:7px solid transparent;border-bottom-color:\", \";}> ul{list-style:none;}\", \";\", \";\", \";\"], (0, _constants.get)('colors.white'), (0, _constants.get)('radii.2'), (0, _constants.get)('colors.blackfade15'), (0, _constants.get)('colors.white'), function (props) {\n  return props.direction ? (0, _DropdownStyles[\"default\"])(props.theme, props.direction) : '';\n}, _constants.COMMON, _sx[\"default\"]);\nDropdown.Item = _styledComponents[\"default\"].li.withConfig({\n  displayName: \"Dropdown__Item\",\n  componentId: \"sc-3wysgd-3\"\n})([\"display:block;padding:\", \" 10px \", \" 15px;overflow:hidden;color:\", \";text-overflow:ellipsis;white-space:nowrap;a{color:\", \";text-decoration:none;display:block;padding:\", \" 10px \", \" 15px;overflow:hidden;color:\", \";text-overflow:ellipsis;white-space:nowrap;}&:focus,a:focus{color:\", \";text-decoration:none;background-color:\", \";}&:hover,&:hover a{color:\", \";text-decoration:none;background-color:\", \";outline:none;}\", \";\", \";\"], (0, _constants.get)('space.1'), (0, _constants.get)('space.1'), (0, _constants.get)('colors.gray.9'), (0, _constants.get)('colors.gray.9'), (0, _constants.get)('space.1'), (0, _constants.get)('space.1'), (0, _constants.get)('colors.gray.9'), (0, _constants.get)('colors.white'), (0, _constants.get)('colors.blue.5'), (0, _constants.get)('colors.white'), (0, _constants.get)('colors.blue.5'), _constants.COMMON, _sx[\"default\"]);\nDropdown.Menu.propTypes = (0, _objectSpread2[\"default\"])({\n  direction: _propTypes[\"default\"].oneOf(['ne', 'e', 'se', 's', 'sw', 'w'])\n}, _constants.COMMON.propTypes, {}, _sx[\"default\"].propTypes);\nDropdown.Menu.defaultProps = {\n  direction: 'sw',\n  theme: _theme[\"default\"]\n};\nDropdown.Menu.displayName = 'Dropdown.Menu';\nDropdown.Item.defaultProps = {\n  theme: _theme[\"default\"]\n};\nDropdown.Item.propTypes = (0, _objectSpread2[\"default\"])({}, _constants.COMMON.propTypes, {}, _sx[\"default\"].propTypes);\nDropdown.Item.displayName = 'Dropdown.Item';\nDropdown.Button.defaultProps = (0, _objectSpread2[\"default\"])({\n  theme: _theme[\"default\"]\n}, _Button[\"default\"].defaultProps);\nDropdown.Button.propTypes = (0, _objectSpread2[\"default\"])({}, _Button[\"default\"].propTypes);\nDropdown.Button.displayName = 'Dropdown.Button';\nDropdown.Caret.defaultProps = {\n  theme: _theme[\"default\"]\n};\nDropdown.Caret.propTypes = (0, _objectSpread2[\"default\"])({}, _constants.COMMON.propTypes, {}, _sx[\"default\"].propTypes);\nDropdown.Caret.displayName = 'Dropdown.Caret';\nDropdown.defaultProps = (0, _objectSpread2[\"default\"])({\n  theme: _theme[\"default\"]\n}, _Details[\"default\"].defaultProps);\nDropdown.propTypes = (0, _objectSpread2[\"default\"])({}, _Details[\"default\"].propTypes, {}, _constants.COMMON.propTypes);\nvar _default = Dropdown;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _constants = require(\"./constants\");\n\nvar _theme = _interopRequireDefault(require(\"./theme\"));\n\nvar _sx = _interopRequireDefault(require(\"./sx\"));\n\n// The <details> element is not yet supported in Edge so we have to use a polyfill.\n// We have to check if window is defined before importing the polyfill\n// so the code doesnt run while pages build\n// uses require because of primer/components issue #638\nif (typeof window !== 'undefined') {\n  require('details-element-polyfill');\n}\n\nvar StyledDetails = (0, _styledComponents[\"default\"])('details').withConfig({\n  displayName: \"Details__StyledDetails\",\n  componentId: \"sc-1uozfty-0\"\n})([\"& > summary{list-style:none;}& > summary::-webkit-details-marker{display:none;}\", \" \", \";\"], _constants.COMMON, _sx[\"default\"]);\n\nfunction getRenderer(children) {\n  return typeof children === 'function' ? children : function () {\n    return children;\n  };\n}\n\nfunction Details(_ref) {\n  var children = _ref.children,\n      overlay = _ref.overlay,\n      _ref$render = _ref.render,\n      render = _ref$render === void 0 ? getRenderer(children) : _ref$render,\n      userOpen = _ref.open,\n      onClickOutside = _ref.onClickOutside,\n      onToggle = _ref.onToggle,\n      _ref$defaultOpen = _ref.defaultOpen,\n      defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen,\n      rest = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"children\", \"overlay\", \"render\", \"open\", \"onClickOutside\", \"onToggle\", \"defaultOpen\"]);\n\n  var _useState = (0, _react.useState)(defaultOpen),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      internalOpen = _useState2[0],\n      setInternalOpen = _useState2[1];\n\n  var ref = (0, _react.useRef)(null); // only use internal open state if user doesn't provide a value for the open prop\n\n  var open = typeof userOpen !== 'undefined' ? userOpen : internalOpen;\n  var onClickOutsideInternal = (0, _react.useCallback)(function (event) {\n    if (event.target.closest('details') !== ref.current) {\n      onClickOutside && onClickOutside(event);\n\n      if (!event.defaultPrevented) {\n        setInternalOpen(false);\n      }\n    }\n  }, [ref, onClickOutside, setInternalOpen]); // handles the overlay behavior - closing the menu when clicking outside of it\n\n  (0, _react.useEffect)(function () {\n    if (open && overlay) {\n      document.addEventListener('click', onClickOutsideInternal);\n      return function () {\n        document.removeEventListener('click', onClickOutsideInternal);\n      };\n    }\n  }, [open, overlay, onClickOutsideInternal]);\n\n  function handleToggle(e) {\n    onToggle && onToggle(e);\n\n    if (!e.defaultPrevented) {\n      setInternalOpen(e.target.open);\n    }\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledDetails, (0, _extends2[\"default\"])({}, rest, {\n    ref: ref,\n    open: open,\n    onToggle: handleToggle,\n    overlay: overlay\n  }), render({\n    open: open\n  }));\n}\n\nDetails.displayName = \"Details\";\nDetails.defaultProps = {\n  theme: _theme[\"default\"],\n  overlay: false\n};\nDetails.propTypes = (0, _objectSpread2[\"default\"])({\n  children: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].node, _propTypes[\"default\"].func]),\n  className: _propTypes[\"default\"].string,\n  defaultOpen: _propTypes[\"default\"].bool,\n  overlay: _propTypes[\"default\"].bool,\n  render: _propTypes[\"default\"].func,\n  theme: _propTypes[\"default\"].object\n}, _constants.COMMON.propTypes, {}, _sx[\"default\"].propTypes);\nvar _default = Details;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"./constants\");\n\nvar getDirectionStyles = function getDirectionStyles(theme, direction) {\n  var map = {\n    w: \"\\n      top: 0;\\n      right: 100%;\\n      left: auto;\\n      width: auto;\\n      margin-top: 0;\\n      margin-right: 10px;\\n\\n      &::before {\\n        top: 10px;\\n        right: -16px;\\n        left: auto;\\n        border-color: transparent;\\n        border-left-color: \".concat((0, _constants.get)('colors.blackfade15')(theme), \";\\n      }\\n\\n      &::after {\\n        top: 11px;\\n        right: -14px;\\n        left: auto;\\n        border-color: transparent;\\n        border-left-color: \").concat((0, _constants.get)('colors.white')(theme), \";\\n      }\\n    \"),\n    e: \"\\n      top: 0;\\n      left: 100%;\\n      width: auto;\\n      margin-top: 0;\\n      margin-left: 10px;\\n\\n      &::before {\\n        top: 10px;\\n        left: -16px;\\n        border-color: transparent;\\n        border-right-color: \".concat((0, _constants.get)('colors.blackfade15')(theme), \";\\n      }\\n\\n      &::after {\\n        top: 11px;\\n        left: -14px;\\n        border-color: transparent;\\n        border-right-color: \").concat((0, _constants.get)('colors.white')(theme), \";\\n      }\\n    \"),\n    ne: \"\\n      top: auto;\\n      bottom: 100%;\\n      left: 0;\\n      margin-bottom: 3px;\\n\\n      &::before,\\n      &::after {\\n        top: auto;\\n        right: auto;\\n      }\\n\\n      &::before {\\n        bottom: -8px;\\n        left: 9px;\\n        border-top: 8px solid \".concat((0, _constants.get)('colors.blackfade15')(theme), \";\\n        border-bottom: 0;\\n        border-left: 8px solid transparent;\\n      }\\n\\n      &::after {\\n        bottom: -7px;\\n        left: 10px;\\n        border-top: 7px solid \").concat((0, _constants.get)('colors.white')(theme), \";\\n        border-right: 7px solid transparent;\\n        border-bottom: 0;\\n        border-left: 7px solid transparent;\\n      }\\n    \"),\n    s: \"\\n      right: 50%;\\n      left: auto;\\n      transform: translateX(50%);\\n\\n      &::before {\\n        top: -16px;\\n        right: 50%;\\n        transform: translateX(50%);\\n      }\\n\\n      &::after {\\n        top: -14px;\\n        right: 50%;\\n        transform: translateX(50%);\\n      }\\n    \",\n    sw: \"\\n      right: 0;\\n      left: auto;\\n\\n      &::before {\\n        top: -16px;\\n        right: 9px;\\n        left: auto;\\n      }\\n\\n      &::after {\\n        top: -14px;\\n        right: 10px;\\n        left: auto;\\n      }\\n    \",\n    se: \"\\n      &::before {\\n        top: -16px;\\n        left: 9px;\\n      }\\n\\n      &::after {\\n        top: -14px;\\n        left: 10px;\\n      }\\n    \"\n  };\n  return map[direction];\n};\n\nvar _default = getDirectionStyles;\nexports[\"default\"] = _default;","import * as d3 from 'd3';\r\nimport equal from 'fast-deep-equal';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(prevProps.caseType, currProps.caseType)) return false;\r\n  if (!equal(prevProps.timeseries, currProps.timeseries)) return false;\r\n  return true;\r\n};\r\n\r\nconst caseColor = (ctype, alpha = '') => {\r\n  switch (ctype) {\r\n    case 'dailyconfirmed':\r\n      return '#dc3545' + alpha;\r\n    case 'dailyactive':\r\n      return '#007bff' + alpha;\r\n    case 'dailyrecovered':\r\n      return '#28a745' + alpha;\r\n    case 'dailydeceased':\r\n      return '#6c757d' + alpha;\r\n    default:\r\n      return;\r\n  }\r\n};\r\n\r\nfunction DeltaBarGraph({timeseries, caseType}) {\r\n  const [data, setData] = useState([]);\r\n  const svgRef = useRef();\r\n\r\n  useEffect(() => {\r\n    setData(timeseries);\r\n  }, [timeseries]);\r\n\r\n  useEffect(() => {\r\n    if (!data.length) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    const width = +svg.attr('width');\r\n    const height = +svg.attr('height');\r\n\r\n    const margin = {top: 50, right: 5, bottom: 50, left: 0};\r\n    const chartRight = width - margin.right;\r\n    const chartBottom = height - margin.bottom;\r\n    const r = 5;\r\n\r\n    const formatTime = d3.timeFormat('%e %b');\r\n    const xScale = d3\r\n      .scaleBand()\r\n      .domain(data.map((d) => formatTime(d.date)))\r\n      .range([margin.left, chartRight])\r\n      .paddingInner(0.33);\r\n\r\n    const yScale = d3\r\n      .scaleLinear()\r\n      .domain([\r\n        Math.min(\r\n          0,\r\n          d3.min(data, (d) => d[caseType])\r\n        ),\r\n        Math.max(\r\n          1,\r\n          d3.max(data, (d) => d[caseType])\r\n        ),\r\n      ])\r\n      .range([chartBottom, margin.top]);\r\n\r\n    const xAxis = d3.axisBottom(xScale).tickSize(0);\r\n\r\n    const t = svg.transition().duration(500);\r\n    svg\r\n      .select('.x-axis')\r\n      .transition(t)\r\n      .style('transform', `translateY(${yScale(0)}px)`)\r\n      .call(xAxis)\r\n      .on('start', () => svg.select('.domain').remove())\r\n      .selectAll('text')\r\n      .attr('y', 0)\r\n      .attr('dy', (d, i) => (data[i][caseType] < 0 ? '-1em' : '1.5em'))\r\n      .style('text-anchor', 'middle')\r\n      .attr('fill', caseColor(caseType));\r\n\r\n    svg\r\n      .selectAll('.bar')\r\n      .data(data)\r\n      .join('path')\r\n      .attr('class', 'bar')\r\n      .transition(t)\r\n      .attr('d', (d) =>\r\n        roundedBar(\r\n          xScale(formatTime(d.date)),\r\n          yScale(0),\r\n          xScale.bandwidth(),\r\n          yScale(0) - yScale(d[caseType]),\r\n          r\r\n        )\r\n      )\r\n      .attr('fill', (d, i) => {\r\n        return i < data.length - 1\r\n          ? caseColor(caseType, '90')\r\n          : caseColor(caseType);\r\n      });\r\n\r\n    const textSelection = svg\r\n      .selectAll('.label')\r\n      .data(data)\r\n      .join('text')\r\n      .attr('class', 'label')\r\n      .attr('x', (d) => xScale(formatTime(d.date)) + xScale.bandwidth() / 2)\r\n      .text((d) => d[caseType]);\r\n\r\n    textSelection\r\n      .transition(t)\r\n      .attr('fill', caseColor(caseType))\r\n      .attr('y', (d) => yScale(d[caseType]) + (d[caseType] < 0 ? 15 : -6));\r\n\r\n    textSelection\r\n      .append('tspan')\r\n      .attr('dy', (d) => `${d[caseType] < 0 ? 1.2 : -1.2}em`)\r\n      .attr('x', (d) => xScale(formatTime(d.date)) + xScale.bandwidth() / 2)\r\n      .text((d, i) =>\r\n        i && data[i - 1][caseType]\r\n          ? d3.format('+.1~%')(\r\n              (data[i][caseType] - data[i - 1][caseType]) /\r\n                Math.abs(data[i - 1][caseType])\r\n            )\r\n          : ''\r\n      )\r\n      .transition(t)\r\n      .attr('fill', caseColor(caseType, '90'));\r\n  }, [data, caseType]);\r\n\r\n  return (\r\n    <div className=\"DeltaBarGraph fadeInUp\" style={{animationDelay: '0.8s'}}>\r\n      <svg\r\n        ref={svgRef}\r\n        width=\"250\"\r\n        height=\"250\"\r\n        viewBox=\"0 0 250 250\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n      >\r\n        <g className=\"x-axis\" />\r\n        <g className=\"y-axis\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default React.memo(DeltaBarGraph, isEqual);\r\n\r\nfunction roundedBar(x, y, w, h, r) {\r\n  r = Math.sign(h) * Math.min(Math.abs(h), r);\r\n  const paths = [\r\n    `M ${x} ${y}`,\r\n    `v ${-h + r}`,\r\n    `q 0 ${-r} ${Math.abs(r)} ${-r}`,\r\n    `h ${w - 2 * Math.abs(r)}`,\r\n    `q ${Math.abs(r)} 0 ${Math.abs(r)} ${r}`,\r\n    `v ${h - r}`,\r\n    'Z',\r\n  ];\r\n  return paths.join(' ');\r\n}\r\n","import React from 'react';\r\nimport * as Icon from 'react-feather';\r\n\r\nfunction StateMetaCard({\r\n  title,\r\n  statistic,\r\n  total,\r\n  formula,\r\n  date,\r\n  description,\r\n  className,\r\n}) {\r\n  return (\r\n    <div className={`meta-item ${className}`}>\r\n      <div className=\"meta-item-top\">\r\n        <h3>{title}</h3>\r\n        <span\r\n          data-tip={formula}\r\n          data-event=\"touchstart mouseover\"\r\n          data-event-off=\"mouseleave\"\r\n          data-for=\"stateMeta\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <Icon.Info />\r\n        </span>\r\n      </div>\r\n      <h1>{statistic}</h1>\r\n      <h5>{date}</h5>\r\n      {total && <h5>{`India has ${total} CPM`}</h5>}\r\n      <p>{description}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StateMetaCard;\r\n","import StateMetaCard from './statemetacard';\r\n\r\nimport {formatNumber} from '../utils/commonfunctions';\r\n\r\nimport {format, parse} from 'date-fns';\r\nimport React from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nfunction StateMeta({\r\n  stateData,\r\n  testObject,\r\n  population,\r\n  lastSevenDaysData,\r\n  totalData,\r\n}) {\r\n  const confirmed = stateData.confirmed;\r\n  const active = stateData.active;\r\n  const deaths = stateData.deaths;\r\n  const recovered = confirmed - active - deaths;\r\n  const sevenDayBeforeData = lastSevenDaysData[0].totalconfirmed;\r\n  const sevenDayBeforeDate = format(lastSevenDaysData[0].date, 'dd MMM');\r\n  const previousDayData = lastSevenDaysData[6].totalconfirmed;\r\n  const previousDayDate = format(lastSevenDaysData[6].date, 'dd MMM');\r\n  const confirmedPerMillion = (confirmed / population) * 1000000;\r\n  const recoveryPercent = (recovered / confirmed) * 100;\r\n  const activePercent = (active / confirmed) * 100;\r\n  const deathPercent = (deaths / confirmed) * 100;\r\n  const testPerMillion = (testObject?.totaltested / population) * 1000000;\r\n  const growthRate =\r\n    ((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100;\r\n  const totalConfirmedPerMillion =\r\n    (totalData[0].confirmed / 1332900000) * 1000000;\r\n  // const doublingRate =\r\n  // growthRate > 0 ? (70 / Math.round(growthRate)).toFixed(2) : 0;\r\n\r\n  const updatedDate = !isNaN(\r\n    parse(testObject?.updatedon, 'dd/MM/yyyy', new Date())\r\n  )\r\n    ? `As of ${format(\r\n        parse(testObject?.updatedon, 'dd/MM/yyyy', new Date()),\r\n        'dd MMM'\r\n      )}`\r\n    : '';\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"StateMeta population\">\r\n        <ReactTooltip\r\n          place=\"top\"\r\n          type=\"dark\"\r\n          effect=\"solid\"\r\n          multiline={true}\r\n          scrollHide={true}\r\n          globalEventOff=\"click\"\r\n          id=\"stateMeta\"\r\n        />\r\n        <div className=\"meta-item population fadeInUp\">\r\n          <h3>Population</h3>\r\n          <h1>{formatNumber(population)}</h1>\r\n        </div>\r\n        <div className=\"alert\">\r\n          <Icon.Compass />\r\n          <div className=\"alert-right\">\r\n            Based on 2019 population projection by NCP{' '}\r\n            <a\r\n              href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\r\n              target=\"_noblank\"\r\n            >\r\n              report\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"StateMeta\">\r\n        <StateMetaCard\r\n          className=\"confirmed\"\r\n          title={'Confirmed Per Million'}\r\n          statistic={confirmedPerMillion.toFixed(2)}\r\n          total={totalConfirmedPerMillion.toFixed(2)}\r\n          formula={'(confirmed / state population) * 1 Million'}\r\n          description={`\r\n            ${Math.round(\r\n              confirmedPerMillion\r\n            )} out of every 1 million people in ${\r\n            stateData.state\r\n          } have tested positive for the virus.\r\n            `}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"active\"\r\n          title={'Active'}\r\n          statistic={`${activePercent.toFixed(2)}%`}\r\n          formula={'(active / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases, ${activePercent.toFixed(\r\n            0\r\n          )} are currently infected.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"recovery\"\r\n          title={'Recovery Rate'}\r\n          statistic={`${recoveryPercent.toFixed(2)}%`}\r\n          formula={'(recovered / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases,\r\n            ${Math.round(\r\n              recoveryPercent.toFixed(0)\r\n            )} have recovered from the virus.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"mortality\"\r\n          title={'Mortality Rate'}\r\n          statistic={`${deathPercent.toFixed(2)}%`}\r\n          formula={'(deceased / confirmed) * 100'}\r\n          description={`For every 100 confirmed cases,\r\n            ${Math.round(\r\n              deathPercent.toFixed(0)\r\n            )} have unfortunately passed away from the virus.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"gr\"\r\n          title={'Avg. Growth Rate'}\r\n          statistic={growthRate > 0 ? `${Math.round(growthRate / 7)}%` : '-'}\r\n          formula={\r\n            '(((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100)/7'\r\n          }\r\n          date={`${sevenDayBeforeDate} - ${previousDayDate}`}\r\n          description={`In the last one week, the number of new infections has grown by an average of ${Math.round(\r\n            growthRate / 7\r\n          )}% every day.`}\r\n        />\r\n\r\n        <StateMetaCard\r\n          className=\"tpm\"\r\n          title={'Tests Per Million'}\r\n          statistic={` ${Math.round(testPerMillion)}`}\r\n          formula={\r\n            '(total tests in state / total population of state) * 1 Million'\r\n          }\r\n          date={updatedDate}\r\n          description={`For every 1 million people in ${stateData.state},\r\n            ${Math.round(testPerMillion)} people were tested.`}\r\n        />\r\n\r\n        {/* <div className=\"meta-item ptr fadeInUp\">\r\n          <div className=\"meta-item-top\">\r\n            <h3>Positive Test Rate</h3>\r\n            <span\r\n              data-tip={\r\n                'TPM = (total tests in state / total population of state) * 1 Million'\r\n              }\r\n              data-event=\"touchstart mouseover\"\r\n              data-event-off=\"mouseleave\"\r\n              data-for=\"stateMeta\"\r\n            >\r\n              <Icon.Info />\r\n            </span>\r\n          </div>\r\n          <h1>\r\n            {testObject?.testpositivityrate\r\n              ? testObject.testpositivityrate\r\n              : 'N/A'}\r\n          </h1>\r\n          {updatedDate}\r\n          <p>\r\n            {testObject?.testpositivityrate\r\n              ? `Out the of total tests conducted till date month, ${testObject.testpositivityrate}% were positive for the virus`\r\n              : 'N/A'}\r\n          </p>\r\n        </div>*/}\r\n\r\n        {/*\r\n          <div className=\"meta-item dbr fadeInUp\">\r\n            <div className=\"meta-item-top\">\r\n              <h3>Doubling Rate</h3>\r\n              <Icon.Info />\r\n            </div>\r\n            <h1>\r\n              {doublingRate > 0 ? Math.round(doublingRate * 7) + ' Days' : '-'}\r\n            </h1>\r\n            <h6 style={{margin: '0'}}>\r\n              {sevenDayBeforeDate} - {previousDayDate}\r\n            </h6>\r\n          </div>\r\n        )*/}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default StateMeta;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Smile = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 14s1.5 2 4 2 4-2 4-2\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"9\",\n    y1: \"9\",\n    x2: \"9.01\",\n    y2: \"9\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"15\",\n    y1: \"9\",\n    x2: \"15.01\",\n    y2: \"9\"\n  }));\n});\nSmile.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSmile.displayName = 'Smile';\nexport default Smile;","import DeltaBarGraph from './deltabargraph';\r\nimport Footer from './footer';\r\nimport Level from './level';\r\nimport MapExplorer from './mapexplorer';\r\nimport Minigraph from './minigraph';\r\nimport StateMeta from './statemeta';\r\nimport TimeSeriesExplorer from './timeseriesexplorer';\r\n\r\nimport {STATE_CODES, STATE_POPULATIONS} from '../constants';\r\nimport {\r\n  formatDateAbsolute,\r\n  formatNumber,\r\n  mergeTimeseries,\r\n  parseStateTimeseries,\r\n  parseStateTestData,\r\n  parseStateTestTimeseries,\r\n  parseDistrictZones,\r\n} from '../utils/commonfunctions';\r\n\r\nimport Breadcrumb from '@primer/components/lib/Breadcrumb';\r\nimport Dropdown from '@primer/components/lib/Dropdown';\r\nimport anime from 'animejs';\r\nimport axios from 'axios';\r\nimport {format, parse} from 'date-fns';\r\nimport React, {useState} from 'react';\r\nimport * as Icon from 'react-feather';\r\nimport {Helmet} from 'react-helmet';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link, useParams, Redirect} from 'react-router-dom';\r\nimport {useMeasure, useEffectOnce} from 'react-use';\r\n\r\nfunction PureBreadcrumbs({stateName, stateCode, fetched, states}) {\r\n  const {t} = useTranslation();\r\n\r\n  return (\r\n    <div className=\"breadcrumb\">\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item href=\"/\">{t('Home')}</Breadcrumb.Item>\r\n        <Dropdown direction=\"w\">\r\n          <summary>\r\n            <Breadcrumb.Item href={`${stateCode}`} selected>\r\n              {t(stateName)}\r\n            </Breadcrumb.Item>\r\n            <Dropdown.Caret className=\"caret\" />\r\n          </summary>\r\n          {fetched && (\r\n            <Dropdown.Menu direction=\"se\">\r\n              {states.map((state) => (\r\n                <Dropdown.Item key={state.statecode} className=\"item\">\r\n                  <Link to={`${state.statecode}`}>\r\n                    {t(STATE_CODES[state.statecode])}\r\n                  </Link>\r\n                </Dropdown.Item>\r\n              ))}\r\n            </Dropdown.Menu>\r\n          )}\r\n        </Dropdown>\r\n      </Breadcrumb>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Breadcrumbs = React.memo(PureBreadcrumbs);\r\n\r\nfunction State(props) {\r\n  const stateCode = useParams().stateCode.toUpperCase();\r\n  const stateName = STATE_CODES[stateCode];\r\n\r\n  const [allStateData, setAllStateData] = useState({});\r\n  const [fetched, setFetched] = useState(false);\r\n  const [districtZones, setDistrictZones] = useState(null);\r\n  const [timeseries, setTimeseries] = useState({});\r\n  const [stateData, setStateData] = useState(null);\r\n  const [testData, setTestData] = useState({});\r\n  const [sources, setSources] = useState({});\r\n  const [districtData, setDistrictData] = useState({});\r\n  const [mapOption, setMapOption] = useState('confirmed');\r\n  const [mapSwitcher, {width}] = useMeasure();\r\n  const [showAllDistricts, setShowAllDistricts] = useState(false);\r\n  const [regionHighlighted, setRegionHighlighted] = useState({\r\n    state: stateName,\r\n  });\r\n\r\n  useEffectOnce(() => {\r\n    getState();\r\n  });\r\n\r\n  const {t} = useTranslation();\r\n\r\n  const getState = async () => {\r\n    try {\r\n      const [\r\n        {data: dataResponse},\r\n        {data: stateDistrictWiseResponse},\r\n        {data: statesDailyResponse},\r\n        {data: stateTestResponse},\r\n        {data: sourcesResponse},\r\n        {data: zonesResponse},\r\n      ] = await Promise.all([\r\n        axios.get('https://api.covid19india.org/data.json'),\r\n        axios.get('https://api.covid19india.org/state_district_wise.json'),\r\n        axios.get('https://api.covid19india.org/states_daily.json'),\r\n        axios.get('https://api.covid19india.org/state_test_data.json'),\r\n        axios.get('https://api.covid19india.org/sources_list.json'),\r\n        axios.get('https://api.covid19india.org/zones.json'),\r\n      ]);\r\n      const states = dataResponse.statewise;\r\n      setAllStateData(states);\r\n      setStateData([states.find((s) => s.statecode === stateCode)]);\r\n      // Timeseries\r\n      const ts = parseStateTimeseries(statesDailyResponse)[stateCode];\r\n      const testTs = parseStateTestTimeseries(\r\n        stateTestResponse.states_tested_data\r\n      )[stateCode];\r\n      // Merge\r\n      const tsMerged = mergeTimeseries(\r\n        {[stateCode]: ts},\r\n        {[stateCode]: testTs}\r\n      );\r\n      setTimeseries(tsMerged[stateCode]);\r\n      // District data\r\n      setDistrictData({\r\n        [stateName]: stateDistrictWiseResponse[stateName],\r\n      });\r\n      const sourceList = sourcesResponse.sources_list;\r\n      setSources(sourceList.filter((state) => state.statecode === stateCode));\r\n\r\n      const stateTestData = parseStateTestData(\r\n        stateTestResponse.states_tested_data\r\n      );\r\n      setTestData({[stateName]: stateTestData[stateName]});\r\n\r\n      setDistrictZones(parseDistrictZones(zonesResponse.zones, stateName));\r\n\r\n      setFetched(true);\r\n      anime({\r\n        targets: '.highlight',\r\n        duration: 200,\r\n        delay: 3000,\r\n        translateX:\r\n          mapOption === 'confirmed'\r\n            ? `${width * 0}px`\r\n            : mapOption === 'active'\r\n            ? `${width * 0.25}px`\r\n            : mapOption === 'recovered'\r\n            ? `${width * 0.5}px`\r\n            : mapOption === 'deceased'\r\n            ? `${width * 0.75}px`\r\n            : '0px',\r\n        easing: 'spring(1, 80, 90, 10)',\r\n        opacity: 1,\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const testObj = testData[stateName];\r\n  const population = STATE_POPULATIONS[stateName];\r\n\r\n  function toggleShowAllDistricts() {\r\n    setShowAllDistricts(!showAllDistricts);\r\n  }\r\n\r\n  const getGridRowCount = () => {\r\n    const gridColumnCount = window.innerWidth >= 540 ? 3 : 2;\r\n    const districtCount =\r\n      (districtData[stateName] &&\r\n        Object.keys(districtData[stateName].districtData).length) ||\r\n      0;\r\n    const gridRowCount = Math.ceil(districtCount / gridColumnCount);\r\n    return gridRowCount;\r\n  };\r\n  const gridRowCount = getGridRowCount();\r\n\r\n  if (!stateName) {\r\n    return <Redirect to=\"/\" />;\r\n  } else {\r\n    return (\r\n      <React.Fragment>\r\n        <Helmet>\r\n          <title>\r\n            Coronavirus Outbreak in {STATE_CODES[stateCode]} - covid19india.org\r\n          </title>\r\n          <meta\r\n            name=\"title\"\r\n            content={`Coronavirus Outbreak in ${STATE_CODES[stateCode]}: Latest Map and Case Count`}\r\n          />\r\n        </Helmet>\r\n\r\n        <div className=\"State\">\r\n          <div className=\"state-left\">\r\n            {fetched && (\r\n              <Breadcrumbs\r\n                stateName={stateName}\r\n                stateCode={stateCode}\r\n                fetched={fetched}\r\n                states={allStateData.filter(\r\n                  (state) =>\r\n                    state.statecode !== 'TT' && state.statecode !== stateCode\r\n                )}\r\n              />\r\n            )}\r\n\r\n            <div className=\"header\">\r\n              <div\r\n                className=\"header-left fadeInUp\"\r\n                style={{animationDelay: '0.3s'}}\r\n              >\r\n                <h1>{t(stateName)}</h1>\r\n                <h5>\r\n                  Last Updated on{' '}\r\n                  {stateData && Object.keys(stateData[0]).length\r\n                    ? formatDateAbsolute(stateData[0].lastupdatedtime)\r\n                    : ''}\r\n                </h5>\r\n              </div>\r\n\r\n              <div\r\n                className=\"header-right fadeInUp\"\r\n                style={{animationDelay: '0.5s'}}\r\n              >\r\n                <h5>{t('Tested')}</h5>\r\n                <h2>{formatNumber(testObj?.totaltested)}</h2>\r\n                <h5 className=\"timestamp\">\r\n                  {!isNaN(parse(testObj?.updatedon, 'dd/MM/yyyy', new Date()))\r\n                    ? `As of ${format(\r\n                        parse(testObj?.updatedon, 'dd/MM/yyyy', new Date()),\r\n                        'dd MMM'\r\n                      )}`\r\n                    : ''}\r\n                </h5>\r\n                <h5>\r\n                  {'per '}\r\n                  {testObj?.totaltested && (\r\n                    <a href={testObj?.source} target=\"_noblank\">\r\n                      source\r\n                    </a>\r\n                  )}\r\n                </h5>\r\n              </div>\r\n            </div>\r\n\r\n            {fetched && (\r\n              <div className=\"map-switcher\" ref={mapSwitcher}>\r\n                <div\r\n                  className={`highlight ${mapOption}`}\r\n                  style={{\r\n                    transform: `translateX(${width * 0}px)`,\r\n                    opacity: 0,\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('confirmed');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('active');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.25}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('recovered');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.5}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n                <div\r\n                  className=\"clickable\"\r\n                  onClick={() => {\r\n                    setMapOption('deceased');\r\n                    anime({\r\n                      targets: '.highlight',\r\n                      translateX: `${width * 0.75}px`,\r\n                      easing: 'spring(1, 80, 90, 10)',\r\n                    });\r\n                  }}\r\n                ></div>\r\n              </div>\r\n            )}\r\n\r\n            {fetched && <Level data={stateData[0]} />}\r\n            {fetched && <Minigraph timeseries={timeseries} />}\r\n            {fetched && (\r\n              <MapExplorer\r\n                mapName={stateName}\r\n                states={stateData}\r\n                districts={districtData}\r\n                zones={districtZones}\r\n                stateTestData={testData}\r\n                regionHighlighted={regionHighlighted}\r\n                setRegionHighlighted={setRegionHighlighted}\r\n                mapOption={mapOption}\r\n                isCountryLoaded={false}\r\n              />\r\n            )}\r\n\r\n            {fetched && (\r\n              <div className=\"meta-secondary\">\r\n                <div className=\"alert\">\r\n                  <Icon.AlertCircle />\r\n                  <div className=\"alert-right\">\r\n                    Awaiting district details for{' '}\r\n                    {districtData[stateName]?.districtData['Unknown']\r\n                      ?.confirmed || '0'}{' '}\r\n                    cases\r\n                  </div>\r\n                </div>\r\n                <div className=\"alert\">\r\n                  <Icon.Compass />\r\n                  <div className=\"alert-right\">\r\n                    Data collected from sources{' '}\r\n                    {sources.length > 0\r\n                      ? Object.keys(sources[0]).map((key, index) => {\r\n                          if (key.match('source') && sources[0][key] !== '') {\r\n                            const num = key.match(/\\d+/);\r\n                            return (\r\n                              <React.Fragment key={index}>\r\n                                {num > 1 ? ',' : ''}\r\n                                <a href={sources[0][key]}>{num}</a>\r\n                              </React.Fragment>\r\n                            );\r\n                          }\r\n                          return null;\r\n                        })\r\n                      : ''}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {fetched && (\r\n              <StateMeta\r\n                stateData={stateData[0]}\r\n                testObject={testObj}\r\n                population={population}\r\n                lastSevenDaysData={timeseries.slice(-7)}\r\n                totalData={allStateData.filter(\r\n                  (state) => state.statecode === 'TT'\r\n                )}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"state-right\">\r\n            {fetched && (\r\n              <React.Fragment>\r\n                <div\r\n                  className=\"district-bar\"\r\n                  style={!showAllDistricts ? {display: 'flex'} : {}}\r\n                >\r\n                  <div\r\n                    className=\"district-bar-left fadeInUp\"\r\n                    style={{animationDelay: '0.6s'}}\r\n                  >\r\n                    <h2 className={mapOption}>Top districts</h2>\r\n                    <div\r\n                      className={`districts ${\r\n                        showAllDistricts ? 'is-grid' : ''\r\n                      }`}\r\n                      style={\r\n                        showAllDistricts\r\n                          ? {gridTemplateRows: `repeat(${gridRowCount}, 2rem)`}\r\n                          : {}\r\n                      }\r\n                    >\r\n                      {districtData[stateName]\r\n                        ? Object.keys(districtData[stateName].districtData)\r\n                            .filter((d) => d !== 'Unknown')\r\n                            .sort((a, b) => {\r\n                              const districtB =\r\n                                districtData[stateName].districtData[b];\r\n                              const districtA =\r\n                                districtData[stateName].districtData[a];\r\n                              return (\r\n                                districtB[mapOption] - districtA[mapOption]\r\n                              );\r\n                            })\r\n                            .slice(0, showAllDistricts ? undefined : 5)\r\n                            .map((district, index) => {\r\n                              const cases =\r\n                                districtData[stateName].districtData[district];\r\n                              return (\r\n                                <div key={index} className=\"district\">\r\n                                  <h2>{cases[mapOption]}</h2>\r\n                                  <h5>{t(district)}</h5>\r\n                                  {mapOption !== 'active' && (\r\n                                    <div className=\"delta\">\r\n                                      <Icon.ArrowUp className={mapOption} />\r\n                                      <h6 className={mapOption}>\r\n                                        {cases.delta[mapOption]}\r\n                                      </h6>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              );\r\n                            })\r\n                        : ''}\r\n                    </div>\r\n                    {districtData[stateName] &&\r\n                      Object.keys(districtData[stateName].districtData).length >\r\n                        5 && (\r\n                        <button\r\n                          className=\"button\"\r\n                          onClick={toggleShowAllDistricts}\r\n                        >\r\n                          {showAllDistricts ? `View less` : `View all`}\r\n                        </button>\r\n                      )}\r\n                  </div>\r\n                  <div className=\"district-bar-right\">\r\n                    {(mapOption === 'confirmed' ||\r\n                      mapOption === 'deceased') && (\r\n                      <div\r\n                        className=\"happy-sign fadeInUp\"\r\n                        style={{animationDelay: '0.6s'}}\r\n                      >\r\n                        {timeseries\r\n                          .slice(-5)\r\n                          .every((day) => day[`daily${mapOption}`] === 0) && (\r\n                          <div\r\n                            className={`alert ${\r\n                              mapOption === 'confirmed' ? 'is-green' : ''\r\n                            }`}\r\n                          >\r\n                            <Icon.Smile />\r\n                            <div className=\"alert-right\">\r\n                              No new {mapOption} cases in the past five days\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    {\r\n                      <DeltaBarGraph\r\n                        timeseries={timeseries.slice(-5)}\r\n                        caseType={`daily${mapOption}`}\r\n                      />\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <TimeSeriesExplorer timeseries={timeseries} />\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <Footer />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default React.memo(State);\r\n"],"sourceRoot":""}